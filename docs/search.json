[{"path":"https://josesalgr.github.io/mosap/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Jose Salgado-Rojas. Author, maintainer. Nuria Aquilue. Author.","code":""},{"path":"https://josesalgr.github.io/mosap/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Salgado-Rojas J, Aquilue N (2026). mosap: Integrated Multi-Objective Spatial Action Planning. R package version 1.0.1, https://josesalgr.github.io/mosap/.","code":"@Manual{,   title = {mosap: Integrated Multi-Objective Spatial Action Planning},   author = {Jose Salgado-Rojas and Nuria Aquilue},   year = {2026},   note = {R package version 1.0.1},   url = {https://josesalgr.github.io/mosap/}, }"},{"path":"https://josesalgr.github.io/mosap/CONTRIBUTING.html","id":null,"dir":"","previous_headings":"","what":"Contributing to prioriactions","title":"Contributing to prioriactions","text":"First , thanks considering contributing prioriactions. greatly appreciate interest improving expanding package. prioriactions result collaborative work programmers experts different disciplines. Since successful modelling projects involve long-term investments participation multiple teams, open expanding set people contributing project. people much welcome contribute code, documentation, testing suggestions.","code":""},{"path":"https://josesalgr.github.io/mosap/CONTRIBUTING.html","id":"fixing-typos-and-documentation","dir":"","previous_headings":"","what":"Fixing typos and documentation","title":"Contributing to prioriactions","text":"contents website produced utilization pkgdown R package. implies ’s need manual HTML coding; website’s content automatically aggregated various sources including code documentation, vignettes, Markdown files. ’re familiar using pkgdown, ’re welcome suggest modifications enhance documentation submitting file change. ’re acquainted pkgdown, feel free raise issue.","code":""},{"path":"https://josesalgr.github.io/mosap/CONTRIBUTING.html","id":"report-a-bug","dir":"","previous_headings":"","what":"Report a bug","title":"Contributing to prioriactions","text":"want report bug suggest enhancement, ’s good idea file issue prioriactions repository GitHub. ’ve found bug, please file issue illustrates bug minimal reprex.","code":""},{"path":"https://josesalgr.github.io/mosap/CONTRIBUTING.html","id":"ask-a-question","dir":"","previous_headings":"","what":"Ask a question","title":"Contributing to prioriactions","text":"Using prioriactions got stuck? Browse documentation see can find solution. Still stuck? Post question issue GitHub. offer user support, ’ll try best address , questions often lead better documentation discovery bugs. want ask question private, can contact package maintainer José Salgado-Rojas.","code":""},{"path":"https://josesalgr.github.io/mosap/CONTRIBUTING.html","id":"propose-an-idea","dir":"","previous_headings":"","what":"Propose an idea","title":"Contributing to prioriactions","text":"idea new feature prioriactions? Take look documentation issue list see isn’t already included suggested. , suggest idea issue GitHub. can’t promise implement every idea, certainly helps : Explain detail proposed feature work. Keep scope narrow possible ensure feasibility. See want contribute code idea well.","code":""},{"path":"https://josesalgr.github.io/mosap/CONTRIBUTING.html","id":"code-contributions","dir":"","previous_headings":"","what":"Code contributions","title":"Contributing to prioriactions","text":"making contributions package R C++ code, make sure someone prioriactions team agrees change suggest needed. Fork package clone onto computer. haven’t done , recommend using usethis::create_from_github(\"prioriactions/prioriactions\", fork = TRUE). Install development dependences devtools::install_dev_deps(), make sure package passes R CMD check running devtools::check(). R CMD check doesn’t pass cleanly, ’s good idea ask help continuing. Create Git branch pull request (PR). recommend using usethis::pr_init(\"brief-description--change\"). Make changes, commit git, create PR running usethis::pr_push(), following prompts browser. title PR briefly describe change. body PR contain Fixes #issue-number. user-facing changes, add bullet top NEWS.md (.e. just first header). Follow style described https://style.tidyverse.org/news.html.","code":""},{"path":"https://josesalgr.github.io/mosap/index.html","id":"mosap-integrated-multi-objective-spatial-action-planning","dir":"","previous_headings":"","what":"Integrated Multi-Objective Spatial Action Planning","title":"Integrated Multi-Objective Spatial Action Planning","text":"⚠️ Experimental package: mosap experimental research package active development. Breaking changes may occur time (API, internal tables, solver interfaces, outputs). Use risk rely production workflows yet.","code":""},{"path":"https://josesalgr.github.io/mosap/index.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"Integrated Multi-Objective Spatial Action Planning","text":"mosap designed support atomic objectives (e.g., minimize cost, minimize fragmentation, maximize benefits) combine multi-objective methods (e.g., weighted sum). package supports tabular spatial inputs (vector- raster-based workflows), stores intermediate artifacts (tables, spatial relations, targets, solver configuration) enable reproducible experimentation reporting.","code":""},{"path":"https://josesalgr.github.io/mosap/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Integrated Multi-Objective Spatial Action Planning","text":"latest development version mosap can installed GitHub:","code":"if (!require(remotes)) install.packages(\"remotes\") remotes::install_github(\"josesalgr/mosap\")"},{"path":"https://josesalgr.github.io/mosap/index.html","id":"usage","dir":"","previous_headings":"","what":"Usage","title":"Integrated Multi-Objective Spatial Action Planning","text":"minimal end--end example showing intended pipeline. believe ’ve found bug mosap, please file issue (ideally reproducible example) : https://github.com/josesalgr/mosap/issues.","code":"library(mosap)  # --- Example inputs (replace with your own) # pu_data            : data.frame(id, cost, locked_in?, locked_out?) # features_data      : data.frame(id, name) # dist_features_data : data.frame(pu, feature, amount)  # 1) Build the Data object x <- inputData(   pu = pu_data,   features = features_data,   dist_features = dist_features_data )  # 2) Add actions/effects/targets/spatial relations as needed x <- x |>   add_actions(actions_df) |>   add_effects(effects_df) |>   add_conservation_targets_relative(0.17) |>   add_spatial_boundary()  # 3) Register atomic objectives (aliases are later used by MO methods) x <- x |>   add_objective_min_cost(alias = \"cost\") |>   add_objective_min_fragmentation(alias = \"frag\")  # 4) Configure a multi-objective method (weighted sum) mo <- set_method_weighted(   x,   aliases = c(\"cost\", \"frag\"),   weights = c(1, 1),   normalize = TRUE )  # 5) Configure solver (example; adapt to your solver and preferences) mo <- set_solver(   mo,   solver = \"auto\",   time_limit = 60,   gap_limit = 0.01,   verbose = TRUE )  # 6) Solve res <- solve(mo)  # 7) Inspect results (examples) get_pu(res, only_selected = TRUE) get_actions(res, only_selected = TRUE) get_features(res) get_targets(res)"},{"path":"https://josesalgr.github.io/mosap/reference/add_actions.html","id":null,"dir":"Reference","previous_headings":"","what":"Add actions to a planning problem — add_actions","title":"Add actions to a planning problem — add_actions","text":"Define set management actions, can implemented (feasibility), costs, optional lock status per (pu, action) pair. function stores action catalogue x$data$actions feasible action distribution x$data$dist_actions. Feasibility controlled via include / exclude: include NULL feasible_default = TRUE, (pu, action) pairs feasible. include provided, (pu, action) pairs feasible. exclude provided, (pu, action) pairs removed feasible set (either full set include).","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_actions.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add actions to a planning problem — add_actions","text":"","code":"add_actions(   x,   actions,   include = NULL,   exclude = NULL,   cost = NULL,   status = NULL,   feasible_default = TRUE,   na_is_infeasible = TRUE,   sort_actions = TRUE )"},{"path":"https://josesalgr.github.io/mosap/reference/add_actions.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add actions to a planning problem — add_actions","text":"x Data object created inputData inputDataSpatial. Must contain least x$data$pu, x$data$features, x$data$dist_features. actions data.frame defining action catalogue. Must contain unique id column (action identifiers). backwards compatibility, column named action also accepted renamed id. Additional columns kept. include Optional feasibility specification. provided, (pu, action) pairs feasible. Accepts NULL, data.frame, named list (see Details). exclude Optional infeasibility specification. Removed feasible set defined include (full set include NULL feasible_default = TRUE). Accepts formats include. cost Optional cost specification feasible (pu, action) pairs. Accepts: NULL: default cost = 1 pairs, single numeric scalar, named numeric vector (names = action ids), data.frame(action, cost) data.frame(pu, action, cost). status Optional data.frame columns pu, action, status specifying lock status feasible pairs. Status must {0, 2, 3}. feasible_default Logical. include NULL, actions feasible planning units? FALSE include NULL, function errors. na_is_infeasible Logical. relevant include/exclude provided data.frames feasible column. TRUE, treat NA FALSE. sort_actions Logical. TRUE, sort actions id assigning internal ids.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_actions.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add actions to a planning problem — add_actions","text":"updated Data object : x$data$actions: action catalogue including internal_id, x$data$dist_actions: feasible (pu, action) pairs columns pu, action, cost, status, internal_pu, internal_action, x$data$index$pu x$data$index$action: id--internal-id mappings. updated data object.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_actions.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Add actions to a planning problem — add_actions","text":"Accepted formats include exclude: NULL: restriction (valid include feasible_default = TRUE). data.frame columns pu action. optional feasible column supported filter (rows feasible == TRUE used). na_is_infeasible = TRUE, NA values feasible treated FALSE. Action ids must match actions$id, PU ids must match x$data$pu$id. named list names equal action ids. element can : integer vector PU ids, sf object defining spatial zone action. Spatial feasibility: include/exclude provided sf layers, feasibility computed using spatial predicates (geometries cut). Specifically, planning units x$data$pu_sf matched zones via sf::st_intersects(). procedure create new planning unit geometries. Costs: costs can specified single scalar applied feasible pairs, named numeric vector action id, data.frame providing costs action (action, cost) pair (pu, action, cost). Costs must finite non-negative. Locks: status can set lock status specific feasible pairs. Status must one 0 (free), 2 (locked-), 3 (locked-). x$data$pu contains logical locked_out column, action pairs PUs forced status = 3.","code":""},{"path":[]},{"path":"https://josesalgr.github.io/mosap/reference/add_actions.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add actions to a planning problem — add_actions","text":"","code":"if (FALSE) { # \\dontrun{ # Action catalogue actions_df <- data.frame(id = c(\"harvest\", \"sustainable\", \"restoration\"))  # 1) Full feasibility (all actions everywhere), constant cost p <- add_actions(p, actions = actions_df, cost = 10)  # 2) Only allow some pairs (include) include_df <- data.frame(   pu = c(1, 2, 10),   action = c(\"harvest\", \"harvest\", \"restoration\") ) p <- add_actions(p, actions = actions_df, include = include_df, cost = 10)  # 3) Allow everything except some impossible pairs (exclude) exclude_df <- data.frame(pu = c(1, 2, 3, 5), action = \"harvest\") p <- add_actions(p, actions = actions_df, exclude = exclude_df, cost = 10)  # 4) Feasibility as a named list (PU ids per action) include_list <- list(   harvest = c(1, 2, 3),   restoration = c(10, 11) ) p <- add_actions(p, actions = actions_df, include = include_list)  # 5) Action-specific costs (named vector) costs <- c(harvest = 5, sustainable = 2, restoration = 8) p <- add_actions(p, actions = actions_df, cost = costs)  # 6) Lock status for specific pairs st <- data.frame(pu = c(1, 10), action = c(\"harvest\", \"restoration\"), status = c(3L, 2L)) p <- add_actions(p, actions = actions_df, status = st) } # }"},{"path":"https://josesalgr.github.io/mosap/reference/add_action_max_per_pu.html","id":null,"dir":"Reference","previous_headings":"","what":"Limit the number of actions per planning unit (maximum) — add_action_max_per_pu","title":"Limit the number of actions per planning unit (maximum) — add_action_max_per_pu","text":"Store constraint limits number actions can selected within planning unit (PU). constraint form: $$\\sum_{\\} x_{pu,} \\le \\mathrm{max}$$ PU selected set. function data-: records constraint specification Data object build modify optimization model. constraint later translated linear constraints model builder (e.g., .pa_build_model_apply_constraints()).","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_action_max_per_pu.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Limit the number of actions per planning unit (maximum) — add_action_max_per_pu","text":"","code":"add_action_max_per_pu(   x,   max = 1L,   pu = NULL,   actions = NULL,   overwrite = FALSE )"},{"path":"https://josesalgr.github.io/mosap/reference/add_action_max_per_pu.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Limit the number of actions per planning unit (maximum) — add_action_max_per_pu","text":"x Data object created inputData inputDataSpatial. Must already contain actions (.e., run add_actions first). max Integer scalar \\(\\ge 0\\). Maximum number actions allowed per PU. Default 1L. pu Optional integer vector planning unit ids (external ids, .e., x$data$pu$id) constraint applied. NULL (default), constraint applies PUs. actions Optional character vector action ids (.e., x$data$actions$id) include sum. NULL (default), actions included. overwrite Logical. TRUE, replace existing action_max_per_pu constraint stored x$data$constraints. FALSE (default) constraint already exists, error raised.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_action_max_per_pu.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Limit the number of actions per planning unit (maximum) — add_action_max_per_pu","text":"updated Data object x$data$constraints$action_max_per_pu set list containing constraint specification.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_action_max_per_pu.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Limit the number of actions per planning unit (maximum) — add_action_max_per_pu","text":"constraint can applied : planning units actions (default), subset planning units via pu, /subset actions via actions. Note subset applied existing feasible (pu, action) pairs x$data$dist_actions. requested pu/actions subset yields zero feasible pairs, function stops informative error. x$data$model_ptr already present (model built previously), function marks model dirty setting x$data$meta$model_dirty <- TRUE, signalling model rebuilt solving.","code":""},{"path":[]},{"path":"https://josesalgr.github.io/mosap/reference/add_action_max_per_pu.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Limit the number of actions per planning unit (maximum) — add_action_max_per_pu","text":"","code":"if (FALSE) { # \\dontrun{ # Limit to at most 1 action per PU (default) p <- add_action_max_per_pu(p, max = 1)  # Limit to at most 2 actions per PU p <- add_action_max_per_pu(p, max = 2, overwrite = TRUE)  # Apply the limit only to a subset of PUs p <- add_action_max_per_pu(p, max = 1, pu = c(1, 2, 3), overwrite = TRUE)  # Limit the number of actions among a subset of actions (e.g., only harvest-like actions) p <- add_action_max_per_pu(p, max = 1, actions = c(\"harvest\", \"sustainable\"), overwrite = TRUE)  # Combine PU and action subsets p <- add_action_max_per_pu(   p, max = 1,   pu = c(10, 11, 12),   actions = c(\"harvest\", \"sustainable\"),   overwrite = TRUE ) } # }"},{"path":"https://josesalgr.github.io/mosap/reference/add_area_max_constraint.html","id":null,"dir":"Reference","previous_headings":"","what":"Add maximum selected area constraint — add_area_max_constraint","title":"Add maximum selected area constraint — add_area_max_constraint","text":"Add linear constraint enforcing maximum total selected area using planning unit selection variables \\(w_i\\): $$\\sum_i \\mathrm{area}_i \\, w_i \\le A_{\\max}.$$","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_area_max_constraint.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add maximum selected area constraint — add_area_max_constraint","text":"","code":"add_area_max_constraint(   x,   area_max,   area_col = NULL,   area_unit = c(\"m2\", \"ha\", \"km2\"),   name = \"area_max\" )"},{"path":"https://josesalgr.github.io/mosap/reference/add_area_max_constraint.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add maximum selected area constraint — add_area_max_constraint","text":"x Data object. area_max Numeric scalar \\(\\ge 0\\). Maximum area select (expressed area_unit). area_col Optional character. Name column x$data$pu containing areas. NULL, areas obtained using internal defaults (see Details). area_unit Character. Units area_max. One \"m2\", \"ha\", \"km2\". name Character. Name constraint model. Default \"area_max\".","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_area_max_constraint.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add maximum selected area constraint — add_area_max_constraint","text":"updated Data object new linear constraint added model metadata stored x$data$constraints$area_max.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_area_max_constraint.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Add maximum selected area constraint — add_area_max_constraint","text":"function adds linear constraint current optimization model snapshot. Areas retrieved planning unit table (x$data$pu) via area_col via package defaults implemented .pa_get_area_vec(), converted requested area_unit. coefficient vector aligned model's planning unit order (n_pu internal \\(w\\) variable offset stored x$data$model_list). Constraint metadata also stored x$data$constraints$area_max printing/reporting.","code":""},{"path":[]},{"path":"https://josesalgr.github.io/mosap/reference/add_area_max_constraint.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add maximum selected area constraint — add_area_max_constraint","text":"","code":"if (FALSE) { # \\dontrun{ # Enforce selecting at most 500 km2 p <- add_area_max_constraint(p, area_max = 500, area_unit = \"km2\")  # Use a custom area column stored in x$data$pu$area_m2 p <- add_area_max_constraint(p, area_max = 2e6, area_unit = \"m2\", area_col = \"area_m2\") } # }"},{"path":"https://josesalgr.github.io/mosap/reference/add_area_min_constraint.html","id":null,"dir":"Reference","previous_headings":"","what":"Add minimum selected area constraint — add_area_min_constraint","title":"Add minimum selected area constraint — add_area_min_constraint","text":"Add linear constraint enforcing minimum total selected area using planning unit selection variables \\(w_i\\): $$\\sum_i \\mathrm{area}_i \\, w_i \\ge A_{\\min}.$$","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_area_min_constraint.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add minimum selected area constraint — add_area_min_constraint","text":"","code":"add_area_min_constraint(   x,   area_min,   area_col = NULL,   area_unit = c(\"m2\", \"ha\", \"km2\"),   name = \"area_min\" )"},{"path":"https://josesalgr.github.io/mosap/reference/add_area_min_constraint.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add minimum selected area constraint — add_area_min_constraint","text":"x Data object. area_min Numeric scalar \\(\\ge 0\\). Minimum area select (expressed area_unit). area_col Optional character. Name column x$data$pu containing areas. NULL, areas obtained using internal defaults (see Details). area_unit Character. Units area_min. One \"m2\", \"ha\", \"km2\". name Character. Name constraint model. Default \"area_min\".","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_area_min_constraint.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add minimum selected area constraint — add_area_min_constraint","text":"updated Data object new linear constraint added model metadata stored x$data$constraints$area_min.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_area_min_constraint.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Add minimum selected area constraint — add_area_min_constraint","text":"function adds linear constraint current optimization model snapshot. Areas retrieved planning unit table (x$data$pu) via area_col via package defaults implemented .pa_get_area_vec(), converted requested area_unit. coefficient vector aligned model's planning unit order (n_pu internal \\(w\\) variable offset stored x$data$model_list). Constraint metadata also stored x$data$constraints$area_min printing/reporting.","code":""},{"path":[]},{"path":"https://josesalgr.github.io/mosap/reference/add_area_min_constraint.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add minimum selected area constraint — add_area_min_constraint","text":"","code":"if (FALSE) { # \\dontrun{ # Enforce selecting at least 1000 ha p <- add_area_min_constraint(p, area_min = 1000, area_unit = \"ha\")  # Use a custom area column stored in x$data$pu$Area_km2 p <- add_area_min_constraint(p, area_min = 250, area_unit = \"km2\", area_col = \"Area_km2\") } # }"},{"path":"https://josesalgr.github.io/mosap/reference/add_benefits.html","id":null,"dir":"Reference","previous_headings":"","what":"Add benefits (positive effects) — add_benefits","title":"Add benefits (positive effects) — add_benefits","text":"Convenience wrapper around add_effects keeps rows benefit > 0 (.e., positive changes). backwards compatibility, argument benefits alias effects. addition writing x$data$dist_effects, function also writes backward-compatible table x$data$dist_benefit containing benefit component.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_benefits.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add benefits (positive effects) — add_benefits","text":"","code":"add_benefits(   x,   benefits = NULL,   ...,   effect_type = c(\"delta\", \"after\"),   effect_aggregation = c(\"sum\", \"mean\"),   align_rasters = TRUE,   keep_zero = FALSE,   drop_locked_out = TRUE,   na_to_zero = TRUE )"},{"path":"https://josesalgr.github.io/mosap/reference/add_benefits.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add benefits (positive effects) — add_benefits","text":"x Data object created inputData inputDataSpatial. Must contain x$data$dist_actions (run add_actions first). benefits Alias effects backwards compatibility. effect_type Character. interpret provided values explicit tables raster lists: \"delta\": values represent signed deltas (default), \"\": values represent -action amounts (converted deltas using baseline). effect_aggregation Character. Aggregation used compute PU-level values rasters. One \"sum\" \"mean\". align_rasters Logical. TRUE, attempt align effect rasters PU raster grid zonal operations (default TRUE). keep_zero Logical. TRUE, keep rows benefit == 0 loss == 0. Default FALSE. drop_locked_out Logical. TRUE, drop rows (pu, action) pairs status == 3 x$data$dist_actions (column exists). Default TRUE. na_to_zero Logical. TRUE, treat missing values 0 computing benefit/loss. Default TRUE.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_benefits.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add benefits (positive effects) — add_benefits","text":"updated Data object.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_conservation_targets_absolute.html","id":null,"dir":"Reference","previous_headings":"","what":"Add conservation targets (absolute) — add_conservation_targets_absolute","title":"Add conservation targets (absolute) — add_conservation_targets_absolute","text":"Adds absolute conservation targets per feature. provided values treated absolute thresholds units feature amounts stored x$data$dist_features$amount.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_conservation_targets_absolute.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add conservation targets (absolute) — add_conservation_targets_absolute","text":"","code":"add_conservation_targets_absolute(x, targets, overwrite = FALSE, label = NULL)"},{"path":"https://josesalgr.github.io/mosap/reference/add_conservation_targets_absolute.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add conservation targets (absolute) — add_conservation_targets_absolute","text":"x data object. targets Target specification. See Targets format targets details. overwrite Logical. TRUE, replace existing conservation targets features. label Optional character label stored targets (useful reporting).","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_conservation_targets_absolute.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add conservation targets (absolute) — add_conservation_targets_absolute","text":"Updated data object.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_conservation_targets_relative.html","id":null,"dir":"Reference","previous_headings":"","what":"Add conservation targets (relative to baseline) — add_conservation_targets_relative","title":"Add conservation targets (relative to baseline) — add_conservation_targets_relative","text":"Adds relative conservation targets proportions \\([0,1]\\) baseline total representation feature study area. Baseline totals computed input data (via .pa_feature_totals()).","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_conservation_targets_relative.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add conservation targets (relative to baseline) — add_conservation_targets_relative","text":"","code":"add_conservation_targets_relative(x, targets, overwrite = FALSE, label = NULL)"},{"path":"https://josesalgr.github.io/mosap/reference/add_conservation_targets_relative.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add conservation targets (relative to baseline) — add_conservation_targets_relative","text":"x data object. targets Target specification (proportions \\([0,1]\\)). overwrite Logical. TRUE, replace existing conservation targets features. label Optional character label stored targets.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_conservation_targets_relative.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add conservation targets (relative to baseline) — add_conservation_targets_relative","text":"Updated data object.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_effects.html","id":null,"dir":"Reference","previous_headings":"","what":"Add effects (benefit/loss) to a planning problem — add_effects","title":"Add effects (benefit/loss) to a planning problem — add_effects","text":"Define ecological (feature-based) effects implementing actions planning units. Effects stored x$data$dist_effects two non-negative components per feasible (pu, action, feature) triple: benefit \\(\\ge 0\\): positive change (improvement), loss \\(\\ge 0\\): magnitude negative change (damage), computed loss = -min(delta, 0).","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_effects.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add effects (benefit/loss) to a planning problem — add_effects","text":"","code":"add_effects(   x,   effects = NULL,   effect_type = c(\"delta\", \"after\"),   effect_aggregation = c(\"sum\", \"mean\"),   align_rasters = TRUE,   keep_zero = FALSE,   drop_locked_out = TRUE,   na_to_zero = TRUE,   filter = c(\"any\", \"benefit\", \"loss\") )"},{"path":"https://josesalgr.github.io/mosap/reference/add_effects.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add effects (benefit/loss) to a planning problem — add_effects","text":"x Data object created inputData inputDataSpatial. Must contain x$data$dist_actions (run add_actions first). effects Effect specification. One : NULL: store empty effects table. data.frame(action, feature, multiplier): apply signed multipliers baseline amounts. feature may feature ids feature names (matching x$data$features$name). data.frame(pu, action, feature, ...): explicit effects one : delta (signed) effect (signed), (-action amount; set effect_type = \"\"), benefit /loss (non-negative; missing component treated 0), legacy signed benefit without loss (treated signed delta). named list terra::SpatRaster objects: names = action ids; one layer per feature. effect_type Character. interpret provided values explicit tables raster lists: \"delta\": values represent signed deltas (default), \"\": values represent -action amounts (converted deltas using baseline). effect_aggregation Character. Aggregation used compute PU-level values rasters. One \"sum\" \"mean\". align_rasters Logical. TRUE, attempt align effect rasters PU raster grid zonal operations (default TRUE). keep_zero Logical. TRUE, keep rows benefit == 0 loss == 0. Default FALSE. drop_locked_out Logical. TRUE, drop rows (pu, action) pairs status == 3 x$data$dist_actions (column exists). Default TRUE. na_to_zero Logical. TRUE, treat missing values 0 computing benefit/loss. Default TRUE. filter Character. Filter rows non-zero component: \"\": keep benefit loss rows (default), \"benefit\": keep rows benefit > 0, \"loss\": keep rows loss > 0.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_effects.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add effects (benefit/loss) to a planning problem — add_effects","text":"updated Data object x$data$dist_effects created/updated, metadata stored x$data$effects_meta.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_effects.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Add effects (benefit/loss) to a planning problem — add_effects","text":"Internally, effects may originate signed values (deltas) -action amounts. Regardless input, dist_effects always stores benefit loss non-negative values avoid ambiguity support models separately account gains damages. Baseline -action amounts. effect_type = \"\", provided values interpreted -action amounts converted signed deltas using baseline amounts x$data$dist_features$amount: $$\\mathrm{delta} = \\mathrm{} - \\mathrm{baseline}.$$ Missing baseline values treated 0. Supported effect specifications. NULL: store empty effects table (recommended default effects available yet). Multipliers: data.frame(action, feature, multiplier) applies signed multiplier baseline amounts: \\(\\mathrm{delta} = \\mathrm{amount} \\times \\mathrm{multiplier}\\). Explicit rows: data.frame(pu, action, feature, ...) providing either signed deltas (delta effect, legacy signed benefit), -action amounts (), already split non-negative benefit/loss. Rasters per action: named list terra::SpatRaster objects (names action ids), one layer per feature. Raster values aggregated planning unit using effect_aggregation interpreted deltas -action amounts depending effect_type. Feasibility locks. Effects retained feasible (pu, action) pairs present x$data$dist_actions. drop_locked_out = TRUE x$data$dist_actions$status exists, pairs status == 3 excluded effects processed. Filtering. can keep beneficial effects (benefit > 0) losses (loss > 0) using filter. default, rows benefit == 0 loss == 0 dropped unless keep_zero = TRUE.","code":""},{"path":[]},{"path":"https://josesalgr.github.io/mosap/reference/add_effects.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add effects (benefit/loss) to a planning problem — add_effects","text":"","code":"if (FALSE) { # \\dontrun{ # 1) Empty effects (default) p <- add_effects(p, effects = NULL)  # 2) Multipliers (action x feature): delta = amount * multiplier mult <- data.frame(   action = c(\"harvest\", \"harvest\", \"restoration\"),   feature = c(\"sp1\", \"sp2\", \"sp1\"),      # feature names (requires x$data$features$name)   multiplier = c(-0.2, -0.1, 0.3) ) p <- add_effects(p, effects = mult, effect_type = \"delta\")  # 3) Explicit deltas by (pu, action, feature) eff <- data.frame(   pu = c(1, 1, 2),   action = c(\"harvest\", \"harvest\", \"restoration\"),   feature = c(1, 2, 1),   delta = c(-0.5, 0.2, 1.0) ) p <- add_effects(p, effects = eff)  # 4) After-action amounts (converted to delta = after - baseline) after_tbl <- transform(eff, after = delta) # example only; typically after is an absolute amount p <- add_effects(p, effects = after_tbl, effect_type = \"after\")  # 5) Raster effects per action (one layer per feature) # effects_rasters <- list(harvest = r_harv, restoration = r_rest) # terra::SpatRaster # p <- add_effects(p, effects = effects_rasters, effect_type = \"delta\", effect_aggregation = \"sum\")  # Keep only beneficial effects p <- add_effects(p, effects = eff, filter = \"benefit\") } # }"},{"path":"https://josesalgr.github.io/mosap/reference/add_losses.html","id":null,"dir":"Reference","previous_headings":"","what":"Add losses (negative effects magnitude) — add_losses","title":"Add losses (negative effects magnitude) — add_losses","text":"Convenience wrapper around add_effects keeps rows loss > 0 (.e., magnitude negative changes). Also writes x$data$dist_loss containing loss component.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_losses.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add losses (negative effects magnitude) — add_losses","text":"","code":"add_losses(   x,   losses = NULL,   ...,   effect_type = c(\"delta\", \"after\"),   effect_aggregation = c(\"sum\", \"mean\"),   align_rasters = TRUE,   keep_zero = FALSE,   drop_locked_out = TRUE,   na_to_zero = TRUE )"},{"path":"https://josesalgr.github.io/mosap/reference/add_losses.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add losses (negative effects magnitude) — add_losses","text":"x Data object created inputData inputDataSpatial. Must contain x$data$dist_actions (run add_actions first). effect_type Character. interpret provided values explicit tables raster lists: \"delta\": values represent signed deltas (default), \"\": values represent -action amounts (converted deltas using baseline). effect_aggregation Character. Aggregation used compute PU-level values rasters. One \"sum\" \"mean\". align_rasters Logical. TRUE, attempt align effect rasters PU raster grid zonal operations (default TRUE). keep_zero Logical. TRUE, keep rows benefit == 0 loss == 0. Default FALSE. drop_locked_out Logical. TRUE, drop rows (pu, action) pairs status == 3 x$data$dist_actions (column exists). Default TRUE. na_to_zero Logical. TRUE, treat missing values 0 computing benefit/loss. Default TRUE.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_losses.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add losses (negative effects magnitude) — add_losses","text":"updated Data object.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_mixed_targets_total_absolute.html","id":null,"dir":"Reference","previous_headings":"","what":"Add mixed total targets (absolute) — add_mixed_targets_total_absolute","title":"Add mixed total targets (absolute) — add_mixed_targets_total_absolute","text":"Adds absolute mixed-total targets per feature. mixed-total target enforces baseline representation plus action-induced deltas jointly reach single threshold: $$\\sum_i z_{} r_{} + \\sum_{,} x_{ia}\\Delta_{ias} \\ge T^{mix}_s.$$","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_mixed_targets_total_absolute.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add mixed total targets (absolute) — add_mixed_targets_total_absolute","text":"","code":"add_mixed_targets_total_absolute(x, targets, overwrite = FALSE, label = NULL)"},{"path":"https://josesalgr.github.io/mosap/reference/add_mixed_targets_total_absolute.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add mixed total targets (absolute) — add_mixed_targets_total_absolute","text":"x data object. targets Target specification (absolute). See Targets format targets details. overwrite Logical. TRUE, replace existing mixed-total targets features (still errors conservation/recovery targets exist features). label Optional character label stored targets.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_mixed_targets_total_absolute.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add mixed total targets (absolute) — add_mixed_targets_total_absolute","text":"Updated data object.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_mixed_targets_total_absolute.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Add mixed total targets (absolute) — add_mixed_targets_total_absolute","text":"Mixed-total targets conceptually different specifying separate conservation recovery targets feature. , mixed-total targets intended mutually exclusive conservation/recovery targets feature. Conflict checks handled .pa_store_targets().","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_mixed_targets_total_relative.html","id":null,"dir":"Reference","previous_headings":"","what":"Add mixed total targets (relative to baseline) — add_mixed_targets_total_relative","title":"Add mixed total targets (relative to baseline) — add_mixed_targets_total_relative","text":"Adds relative mixed-total targets proportions \\([0,1]\\) baseline totals per feature. Baseline totals computed via .pa_feature_totals() stored basis_total.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_mixed_targets_total_relative.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add mixed total targets (relative to baseline) — add_mixed_targets_total_relative","text":"","code":"add_mixed_targets_total_relative(x, targets, overwrite = FALSE, label = NULL)"},{"path":"https://josesalgr.github.io/mosap/reference/add_mixed_targets_total_relative.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add mixed total targets (relative to baseline) — add_mixed_targets_total_relative","text":"x data object. targets Target specification (proportions \\([0,1]\\)). overwrite Logical. TRUE, replace existing mixed-total targets features (subject mutual exclusivity rules enforced .pa_store_targets()). label Optional character label stored targets.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_mixed_targets_total_relative.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add mixed total targets (relative to baseline) — add_mixed_targets_total_relative","text":"Updated data object.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_max_benefit.html","id":null,"dir":"Reference","previous_headings":"","what":"Add objective: maximize benefit — add_objective_max_benefit","title":"Add objective: maximize benefit — add_objective_max_benefit","text":"Specify objective maximizes total benefit delivered selected actions. Benefit values taken benefit table produced add_benefits (stored x$data$dist_benefit /model-ready variant). function data-: stores objective specification inside Data object can materialized later optimization model built (typically calling solve()). alias provided, objective also registered x$data$objectives atomic objective multi-objective workflows.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_max_benefit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add objective: maximize benefit — add_objective_max_benefit","text":"","code":"add_objective_max_benefit(x, benefit_col = \"benefit\", alias = NULL)"},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_max_benefit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add objective: maximize benefit — add_objective_max_benefit","text":"x Data object created inputData inputDataSpatial. benefit_col Character. Column name model-ready benefit table containing numeric benefits. Default \"benefit\". alias Character scalar NULL. Optional identifier register objective atomic objective multi-objective workflows.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_max_benefit.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add objective: maximize benefit — add_objective_max_benefit","text":"updated Data object.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_max_benefit.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Add objective: maximize benefit — add_objective_max_benefit","text":"function updates x$data$model_args : model_type \"maximizeBenefits\" objective_id \"max_benefit\" objective_args list benefit_col model builder require benefit data exist error benefits missing. another objective setter called afterwards, overwrites active single-objective specification x$data$model_args.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_max_benefit.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add objective: maximize benefit — add_objective_max_benefit","text":"","code":"if (FALSE) { # \\dontrun{ x <- inputDataSpatial(pu = pu_sf, cost = \"cost\", features = feat_sf, pu_id_col = \"id\") |>   add_actions(actions_df) |>   add_benefits(benefits_df) |>   add_objective_max_benefit(alias = \"benefit\") } # }"},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_max_net_profit.html","id":null,"dir":"Reference","previous_headings":"","what":"Add objective: maximize net profit — add_objective_max_net_profit","title":"Add objective: maximize net profit — add_objective_max_net_profit","text":"Specify objective maximizes net profit, defined total profit selected (pu, action) pairs minus total costs: $$\\sum \\mathrm{profit}\\,x \\;-\\; \\left(\\sum \\mathrm{pu\\_cost}\\,w + \\sum \\mathrm{action\\_cost}\\,x\\right).$$ Profit taken x$data$dist_profit (created add_profit). Planning-unit costs taken x$data$pu; action costs taken x$data$dist_actions. function data-: stores objective specification inside Data object can materialized later optimization model built. alias provided, objective also registered x$data$objectives atomic objective multi-objective workflows.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_max_net_profit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add objective: maximize net profit — add_objective_max_net_profit","text":"","code":"add_objective_max_net_profit(   x,   profit_col = \"profit\",   include_pu_cost = TRUE,   include_action_cost = TRUE,   alias = NULL )"},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_max_net_profit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add objective: maximize net profit — add_objective_max_net_profit","text":"x Data object created inputData inputDataSpatial. profit_col Character. Column name x$data$dist_profit containing numeric profits. Default \"profit\". include_pu_cost Logical. TRUE, subtract planning-unit costs. include_action_cost Logical. TRUE, subtract action costs. alias Character scalar NULL. Optional identifier register objective atomic objective multi-objective workflows.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_max_net_profit.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add objective: maximize net profit — add_objective_max_net_profit","text":"updated Data object.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_max_net_profit.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Add objective: maximize net profit — add_objective_max_net_profit","text":"function updates x$data$model_args : model_type \"maximizeNetProfit\" objective_id \"max_net_profit\" objective_args list profit_col, include_pu_cost, include_action_cost another objective setter called afterwards, overwrites active single-objective specification x$data$model_args.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_max_profit.html","id":null,"dir":"Reference","previous_headings":"","what":"Add objective: maximize profit — add_objective_max_profit","title":"Add objective: maximize profit — add_objective_max_profit","text":"Specify objective maximizes economic profit selected (pu, action) pairs. Profit values taken x$data$dist_profit, typically created add_profit. function data-: stores objective specification inside Data object can materialized later optimization model built (typically calling solve()). alias provided, objective also registered x$data$objectives atomic objective multi-objective workflows.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_max_profit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add objective: maximize profit — add_objective_max_profit","text":"","code":"add_objective_max_profit(x, profit_col = \"profit\", alias = NULL)"},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_max_profit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add objective: maximize profit — add_objective_max_profit","text":"x Data object created inputData inputDataSpatial. profit_col Character. Column name x$data$dist_profit containing numeric profits. Default \"profit\". alias Character scalar NULL. Optional identifier register objective atomic objective multi-objective workflows.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_max_profit.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add objective: maximize profit — add_objective_max_profit","text":"updated Data object.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_max_profit.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Add objective: maximize profit — add_objective_max_profit","text":"function updates x$data$model_args : model_type \"maximizeProfit\" objective_id \"max_profit\" objective_args list profit_col another objective setter called afterwards, overwrites active single-objective specification x$data$model_args.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_max_representation.html","id":null,"dir":"Reference","previous_headings":"","what":"Add objective: maximize representation — add_objective_max_representation","title":"Add objective: maximize representation — add_objective_max_representation","text":"Specify objective maximizes total representation across features, using z variables associated (pu, feature) rows dist_features. data-setter: stores objective specification inside Data object can materialized later optimization model built. alias provided, objective also registered x$data$objectives atomic objective multi-objective workflows.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_max_representation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add objective: maximize representation — add_objective_max_representation","text":"","code":"add_objective_max_representation(   x,   amount_col = \"amount\",   features = NULL,   internal = FALSE,   alias = NULL )"},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_max_representation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add objective: maximize representation — add_objective_max_representation","text":"x Data object created inputData() inputDataSpatial(). amount_col Character. Column name dist_features containing non-negative amounts. features Optional subset feature ids include objective. Can : integer/numeric feature ids (matching x$data$features$id), character feature ids (matching x$data$features$id character), internal feature indices (1..n_features) internal = TRUE. internal Logical. TRUE, interpret features internal feature indices. alias Character scalar NULL. Optional identifier register objective atomic objective multi-objective workflows.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_max_representation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add objective: maximize representation — add_objective_max_representation","text":"Updated Data object.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_min_action_fragmentation.html","id":null,"dir":"Reference","previous_headings":"","what":"Add objective: minimize action fragmentation — add_objective_min_action_fragmentation","title":"Add objective: minimize action fragmentation — add_objective_min_action_fragmentation","text":"Specify objective minimizes fragmentation action level spatial relation. objective intended models action allocations (rather PU selection) drive spatial cohesion. function data-: stores objective specification inside Data object can materialized later optimization model built. alias provided, objective also registered x$data$objectives atomic objective multi-objective workflows.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_min_action_fragmentation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add objective: minimize action fragmentation — add_objective_min_action_fragmentation","text":"","code":"add_objective_min_action_fragmentation(   x,   relation_name = \"boundary\",   weight_multiplier = 1,   action_weights = NULL,   actions = NULL,   alias = NULL )"},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_min_action_fragmentation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add objective: minimize action fragmentation — add_objective_min_action_fragmentation","text":"x Data object created inputData inputDataSpatial. relation_name Character. Name spatial relation x$data$spatial_relations. weight_multiplier Numeric \\(\\ge 0\\). Multiplier applied relation weights. Default 1. action_weights Optional action weights. Either named numeric vector (names = action ids) data.frame(action, weight). actions Optional subset action ids include objective. alias Character scalar NULL. Optional identifier register objective atomic objective multi-objective workflows.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_min_action_fragmentation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add objective: minimize action fragmentation — add_objective_min_action_fragmentation","text":"updated Data object.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_min_action_fragmentation.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Add objective: minimize action fragmentation — add_objective_min_action_fragmentation","text":"Action-level fragmentation can optionally weight actions differently via action_weights can optionally restrict objective subset actions via actions. exact linearization interpretation implemented model builder.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_min_cost.html","id":null,"dir":"Reference","previous_headings":"","what":"Register an atomic objective (internal) — add_objective_min_cost","title":"Register an atomic objective (internal) — add_objective_min_cost","text":"Internal helper used objective setter functions optionally register objective atomic objective multi-objective workflows. alias non-NULL, objective definition stored x$data$objectives[[alias]]. allows external multi-objective orchestration (e.g., weighted sum, \\(\\epsilon\\)-constraint, AUGMECON, interactive methods) refer objectives stable user-facing identifier. function fully backward compatible single-objective workflows: alias NULL, entry added x$data$objectives active single-objective specification stored x$data$model_args (set calling objective setter) used. Specify objective minimizes total costs associated solution. Costs may include planning-unit costs /action costs depending flags provided. function data-: stores objective specification inside Data object can materialized later optimization model built (typically calling solve()). alias provided, objective also registered x$data$objectives atomic objective multi-objective workflows, preserving legacy single-objective behavior (recently set objective remains active one x$data$model_args).","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_min_cost.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Register an atomic objective (internal) — add_objective_min_cost","text":"","code":"add_objective_min_cost(   x,   include_pu_cost = TRUE,   include_action_cost = TRUE,   alias = NULL )"},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_min_cost.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Register an atomic objective (internal) — add_objective_min_cost","text":"x Data object created inputData inputDataSpatial. include_pu_cost Logical. TRUE, include planning-unit costs objective. include_action_cost Logical. TRUE, include action costs objective. alias Character scalar NULL. Optional identifier register objective atomic objective multi-objective workflows. objective_id Character. Stable objective identifier (e.g., \"min_cost\"). model_type Character. Model type label used model builder (e.g., \"minimizeCosts\"). objective_args List. Objective-specific arguments stored objective. sense Character. Either \"min\" \"max\".","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_min_cost.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Register an atomic objective (internal) — add_objective_min_cost","text":"updated Data object. updated Data object.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_min_cost.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Register an atomic objective (internal) — add_objective_min_cost","text":"function updates x$data$model_args : model_type \"minimizeCosts\" objective_id \"min_cost\" objective_args list include_pu_cost include_action_cost model builder must interpret fields set objective coefficients.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_min_cost.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Register an atomic objective (internal) — add_objective_min_cost","text":"","code":"if (FALSE) { # \\dontrun{ x <- inputDataSpatial(pu = pu_sf, cost = \"cost\", features = feat_sf, pu_id_col = \"id\") |>   add_actions(actions_df) |>   add_objective_min_cost()  # Register as atomic objective for multi-objective workflows x <- x |> add_objective_min_cost(alias = \"cost\") } # }"},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_min_fragmentation.html","id":null,"dir":"Reference","previous_headings":"","what":"Add objective: minimize fragmentation (PU cut) — add_objective_min_fragmentation","title":"Add objective: minimize fragmentation (PU cut) — add_objective_min_fragmentation","text":"Specify objective minimizes spatial fragmentation measured weighted cut selected non-selected planning units spatial relation: $$\\sum_{(,j)} w_{ij}\\,|z_i - z_j|.$$ model builder, objective linearized using auxiliary edge variables. Relation weights \\(w_{ij}\\) read x$data$spatial_relations[[relation_name]] can scaled weight_multiplier (BLM-like scaling). function data-: stores objective specification inside Data object can materialized later optimization model built. alias provided, objective also registered x$data$objectives atomic objective multi-objective workflows.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_min_fragmentation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add objective: minimize fragmentation (PU cut) — add_objective_min_fragmentation","text":"","code":"add_objective_min_fragmentation(   x,   relation_name = \"boundary\",   weight_multiplier = 1,   alias = NULL )"},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_min_fragmentation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add objective: minimize fragmentation (PU cut) — add_objective_min_fragmentation","text":"x Data object created inputData inputDataSpatial. relation_name Character. Name spatial relation x$data$spatial_relations (e.g., \"boundary\", \"rook\", \"queen\", \"knn\"). Default \"boundary\". weight_multiplier Numeric \\(\\ge 0\\). Multiplier applied relation weights. Default 1. alias Character scalar NULL. Optional identifier register objective atomic objective multi-objective workflows.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_min_fragmentation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add objective: minimize fragmentation (PU cut) — add_objective_min_fragmentation","text":"updated Data object.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_min_intervention_fragmentation.html","id":null,"dir":"Reference","previous_headings":"","what":"Add objective: minimize intervention fragmentation — add_objective_min_intervention_fragmentation","title":"Add objective: minimize intervention fragmentation — add_objective_min_intervention_fragmentation","text":"Specify objective minimizes fragmentation intervention level spatial relation. objective intended models interventions represent coarser grouping actions, spatial cohesion evaluated grouping level. function data-: stores objective specification inside Data object can materialized later optimization model built. alias provided, objective also registered x$data$objectives atomic objective multi-objective workflows.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_min_intervention_fragmentation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add objective: minimize intervention fragmentation — add_objective_min_intervention_fragmentation","text":"","code":"add_objective_min_intervention_fragmentation(   x,   relation_name = \"boundary\",   weight_multiplier = 1,   alias = NULL )"},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_min_intervention_fragmentation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add objective: minimize intervention fragmentation — add_objective_min_intervention_fragmentation","text":"x Data object created inputData inputDataSpatial. relation_name Character. Name spatial relation x$data$spatial_relations. weight_multiplier Numeric \\(\\ge 0\\). Multiplier applied relation weights. Default 1. alias Character scalar NULL. Optional identifier register objective atomic objective multi-objective workflows.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_objective_min_intervention_fragmentation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add objective: minimize intervention fragmentation — add_objective_min_intervention_fragmentation","text":"updated Data object.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_profit.html","id":null,"dir":"Reference","previous_headings":"","what":"Add profit to a planning problem — add_profit","title":"Add profit to a planning problem — add_profit","text":"Define (economic) profit values feasible (pu, action) pairs store x$data$dist_profit. Profit intentionally stored separately ecological benefit/loss (see add_effects / add_benefits).","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_profit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add profit to a planning problem — add_profit","text":"","code":"add_profit(x, profit = NULL, keep_zero = FALSE, na_to_zero = TRUE)"},{"path":"https://josesalgr.github.io/mosap/reference/add_profit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add profit to a planning problem — add_profit","text":"x Data object created inputData inputDataSpatial. Must contain x$data$dist_actions x$data$actions (run add_actions first). profit Profit specification. One : NULL: profit set 0 feasible (pu, action) pairs. numeric scalar: recycled feasible (pu, action) pairs. named numeric vector: names action ids; assigns global profit per action. data.frame(action, profit): assigns global profit per action. data.frame(pu, action, profit): assigns explicit profit values pair. keep_zero Logical. TRUE, keep rows profit == 0 stored table. Default FALSE (zero-profit rows dropped). na_to_zero Logical. TRUE, treat missing profit values 0 joins/matching. Default TRUE.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_profit.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add profit to a planning problem — add_profit","text":"updated Data object x$data$dist_profit created/updated.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_profit.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Add profit to a planning problem — add_profit","text":"function creates profit table aligned current feasibility table x$data$dist_actions. resulting x$data$dist_profit contains: pu: external planning unit id, action: action id, profit: numeric profit value, internal_pu: internal PU index, internal_action: internal action index. Profit values can later used build objectives (e.g., maximize profit maximize net profit), budget constraints (e.g., net cost = cost - profit), reporting summaries. function data-: build modify optimization model. also change feasibility; simply assigns profits rows currently present dist_actions. additional filtering (e.g., dropping locked-pairs) applied preparing model-ready tables (typically inside model builder invoked solve()).","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_profit.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add profit to a planning problem — add_profit","text":"","code":"if (FALSE) { # \\dontrun{ # 1) Default: profit = 0 everywhere (table may be empty if keep_zero = FALSE) x <- x |> add_profit()  # 2) Constant profit for every feasible (pu, action) x <- x |> add_profit(profit = 10)  # 3) Profit per action (named vector) pr <- c(harvest = 50, sustainable = 20, restoration = -5) x <- x |> add_profit(profit = pr)  # 4) Profit per action (data.frame) pr_df <- data.frame(action = c(\"harvest\", \"sustainable\"), profit = c(50, 20)) x <- x |> add_profit(profit = pr_df)  # 5) Profit per (pu, action) pair pr_sp <- data.frame(   pu = c(1, 2, 2),   action = c(\"harvest\", \"harvest\", \"sustainable\"),   profit = c(100, 80, 30) ) x <- x |> add_profit(profit = pr_sp, keep_zero = TRUE) } # }"},{"path":"https://josesalgr.github.io/mosap/reference/add_recovery_targets_absolute.html","id":null,"dir":"Reference","previous_headings":"","what":"Add recovery targets (absolute) — add_recovery_targets_absolute","title":"Add recovery targets (absolute) — add_recovery_targets_absolute","text":"Adds absolute recovery targets per feature. Recovery targets represent thresholds action-driven improvements (deltas) rather baseline representation. provided values treated absolute thresholds units effect/benefit amounts used model builder.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_recovery_targets_absolute.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add recovery targets (absolute) — add_recovery_targets_absolute","text":"","code":"add_recovery_targets_absolute(x, targets, overwrite = FALSE, label = NULL)"},{"path":"https://josesalgr.github.io/mosap/reference/add_recovery_targets_absolute.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add recovery targets (absolute) — add_recovery_targets_absolute","text":"x data object. targets Target specification. See Targets format targets details. overwrite Logical. TRUE, replace existing recovery targets features. label Optional character label stored targets.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_recovery_targets_absolute.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add recovery targets (absolute) — add_recovery_targets_absolute","text":"Updated data object.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_recovery_targets_relative.html","id":null,"dir":"Reference","previous_headings":"","what":"Add recovery targets (relative) — add_recovery_targets_relative","title":"Add recovery targets (relative) — add_recovery_targets_relative","text":"Adds relative recovery targets proportions \\([0,1]\\) per-feature basis. default, basis potential maximum improvement per feature derived available actions (via .pa_feature_potential()). Alternatively, relative_basis=\"baseline\" uses baseline totals (via .pa_feature_totals()).","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_recovery_targets_relative.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add recovery targets (relative) — add_recovery_targets_relative","text":"","code":"add_recovery_targets_relative(   x,   targets,   relative_basis = c(\"potential\", \"baseline\"),   overwrite = FALSE,   label = NULL )"},{"path":"https://josesalgr.github.io/mosap/reference/add_recovery_targets_relative.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add recovery targets (relative) — add_recovery_targets_relative","text":"x data object. targets Target specification (proportions \\([0,1]\\)). relative_basis Character. Basis used convert relative targets absolute thresholds: \"potential\" (default) \"baseline\". overwrite Logical. TRUE, replace existing recovery targets features. label Optional character label stored targets.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_recovery_targets_relative.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add recovery targets (relative) — add_recovery_targets_relative","text":"Updated data object.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_boundary.html","id":null,"dir":"Reference","previous_headings":"","what":"Add spatial boundary-length relations from sf polygons or a boundary table — add_spatial_boundary","title":"Add spatial boundary-length relations from sf polygons or a boundary table — add_spatial_boundary","text":"Register boundary-length relation planning units. Boundary relations represent shared edge length adjacent polygons (queen touches).","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_boundary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add spatial boundary-length relations from sf polygons or a boundary table — add_spatial_boundary","text":"","code":"add_spatial_boundary(   x,   boundary = NULL,   pu_sf = NULL,   name = \"boundary\",   weight_col = NULL,   weight_multiplier = 1,   progress = FALSE,   include_self = TRUE,   edge_factor = 1 )"},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_boundary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add spatial boundary-length relations from sf polygons or a boundary table — add_spatial_boundary","text":"x data object. boundary Optional data.frame describing boundaries. Accepted formats: (id1, id2, boundary) (Marxan-style), (pu1, pu2, weight). pu_sf Optional sf object PU polygons id column. NULL, uses x$data$pu_sf. name Character name/key store relation (default \"boundary\"). weight_col Character. Column boundary use weights. NULL, attempts guess \"boundary\" \"weight\". weight_multiplier Numeric multiplier applied boundary weights (e.g., BLM scaling). Must finite positive. progress Logical. TRUE, prints basic progress messages large instances. include_self Logical. TRUE (default), include diagonal (,) entries representing effective exposed boundary length. edge_factor Numeric \\(\\ge 0\\). Multiplier applied exposed boundary computing diagonal weights.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_boundary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add spatial boundary-length relations from sf polygons or a boundary table — add_spatial_boundary","text":"Updated data object stored relation x$data$spatial_relations[[name]].","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_boundary.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Add spatial boundary-length relations from sf polygons or a boundary table — add_spatial_boundary","text":"Two input modes supported: Boundary table mode. boundary provided, interpreted table containing PU pairs boundary-length weight (e.g., Marxan-style bound.dat). Geometry mode. boundary NULL, boundary lengths derived planning-unit polygons (pu_sf x$data$pu_sf). include_self=TRUE, function also adds diagonal entries (,) weights equal \"effective exposed boundary\" (scaled edge_factor). useful objectives boundary-length modifier / fragmentation penalties perimeter exposed outside counted.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_boundary.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add spatial boundary-length relations from sf polygons or a boundary table — add_spatial_boundary","text":"","code":"if (FALSE) { # \\dontrun{ # From a Marxan-style boundary table: x <- x |> add_spatial_boundary(boundary = bound_df, name = \"boundary\")  # From sf polygons: x <- x |> add_spatial_boundary(pu_sf = pu_sf, include_self = TRUE, edge_factor = 1) } # }"},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_distance.html","id":null,"dir":"Reference","previous_headings":"","what":"Add distance-threshold spatial relations from coordinates — add_spatial_distance","title":"Add distance-threshold spatial relations from coordinates — add_spatial_distance","text":"Build register edges planning units whose Euclidean distance less equal dmax, based coordinates. constructor require sf.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_distance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add distance-threshold spatial relations from coordinates — add_spatial_distance","text":"","code":"add_spatial_distance(   x,   coords = NULL,   dmax,   name = \"default\",   weight_fn = c(\"constant\", \"inverse\", \"inverse_sq\"),   eps = 1e-09 )"},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_distance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add distance-threshold spatial relations from coordinates — add_spatial_distance","text":"x data object created inputData() inputDataSpatial(). coords Optional coordinates specification (see add_spatial_knn). dmax Numeric. Maximum distance edge (must finite positive). name Character name/key store relation. weight_fn Character. convert distance weight: \"constant\", \"inverse\", \"inverse_sq\". eps Small numeric constant avoid division zero using inverse weights.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_distance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add distance-threshold spatial relations from coordinates — add_spatial_distance","text":"Updated data object.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_distance.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Add distance-threshold spatial relations from coordinates — add_spatial_distance","text":"constructor uses \\(O(n^2)\\) distance computation therefore best suited small moderate numbers planning units. large instances, consider add_spatial_knn instead.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_distance.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add distance-threshold spatial relations from coordinates — add_spatial_distance","text":"","code":"if (FALSE) { # \\dontrun{ x <- x |> add_spatial_distance(dmax = 1000, name = \"within_1km\", weight_fn = \"constant\") } # }"},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_knn.html","id":null,"dir":"Reference","previous_headings":"","what":"Add k-nearest-neighbours spatial relations from coordinates — add_spatial_knn","title":"Add k-nearest-neighbours spatial relations from coordinates — add_spatial_knn","text":"Build register k-nearest-neighbours (kNN) graph planning units based coordinates. constructor require sf. RANN package available, used speed.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_knn.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add k-nearest-neighbours spatial relations from coordinates — add_spatial_knn","text":"","code":"add_spatial_knn(   x,   coords = NULL,   k = 8,   name = \"default\",   weight_fn = c(\"constant\", \"inverse\", \"inverse_sq\"),   eps = 1e-09 )"},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_knn.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add k-nearest-neighbours spatial relations from coordinates — add_spatial_knn","text":"x data object created inputData() inputDataSpatial(). coords Optional coordinates specification: data.frame(id, x, y), matrix two columns (x,y) aligned PU order. NULL, uses x$data$pu_coords x$data$pu$x/y. k Integer. Number neighbours per planning unit (must >= 1 < n_pu). name Character name/key store relation. weight_fn Character. convert distance weight: \"constant\", \"inverse\", \"inverse_sq\". eps Small numeric constant avoid division zero using inverse weights.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_knn.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add k-nearest-neighbours spatial relations from coordinates — add_spatial_knn","text":"Updated data object.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_knn.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Add k-nearest-neighbours spatial relations from coordinates — add_spatial_knn","text":"Coordinates can supplied explicitly via coords, stored x$data$pu_coords, stored columns x$data$pu$x x$data$pu$y. Edge weights can constant derived distance using weight_fn. stored relation undirected default (duplicates collapsed).","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_knn.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add k-nearest-neighbours spatial relations from coordinates — add_spatial_knn","text":"","code":"if (FALSE) { # \\dontrun{ x <- x |> add_spatial_knn(k = 8, name = \"knn8\", weight_fn = \"inverse\") } # }"},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_queen.html","id":null,"dir":"Reference","previous_headings":"","what":"Add queen adjacency from sf polygons — add_spatial_queen","title":"Add queen adjacency from sf polygons — add_spatial_queen","text":"Build register queen adjacency relation (shared edge shared vertex) planning-unit polygons. Queen adjacency includes rook neighbours plus corner-touching neighbours.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_queen.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add queen adjacency from sf polygons — add_spatial_queen","text":"","code":"add_spatial_queen(x, pu_sf = NULL, name = \"default\", weight = 1)"},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_queen.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add queen adjacency from sf polygons — add_spatial_queen","text":"x data object created inputDataSpatial(). pu_sf Optional sf object PU polygons id column. NULL, uses x$data$pu_sf. name Character name/key store relation. weight Numeric edge weight assigned queen adjacency (default 1).","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_queen.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add queen adjacency from sf polygons — add_spatial_queen","text":"Updated data object.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_queen.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add queen adjacency from sf polygons — add_spatial_queen","text":"","code":"if (FALSE) { # \\dontrun{ x <- x |> add_spatial_queen(name = \"queen\", weight = 1) } # }"},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_relations.html","id":null,"dir":"Reference","previous_headings":"","what":"Add spatial relations (core) — add_spatial_relations","title":"Add spatial relations (core) — add_spatial_relations","text":"Register externally computed spatial relation inside Data object using unified internal representation. users prefer convenience wrappers: add_spatial_boundary, add_spatial_rook, add_spatial_queen, add_spatial_knn, add_spatial_distance.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_relations.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add spatial relations (core) — add_spatial_relations","text":"","code":"add_spatial_relations(   x,   relations,   name = \"default\",   directed = FALSE,   allow_self = FALSE,   duplicate_agg = c(\"sum\", \"max\", \"min\", \"mean\"),   symmetric = FALSE )"},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_relations.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add spatial relations (core) — add_spatial_relations","text":"x data object created inputData() inputDataSpatial(). relations data.frame describing edges. Must contain either: pu1, pu2, weight (external PU ids), internal_pu1, internal_pu2, weight (internal indices). Extra columns (e.g., distance, source) allowed preserved possible. name Character. Name/key store relation (default \"default\"). directed Logical. FALSE (default), treats edges undirected collapses duplicates. TRUE, keeps directed edges provided. allow_self Logical. Whether allow self-edges (,). Default FALSE. duplicate_agg Aggregation duplicate undirected edges directed=FALSE. One \"sum\", \"max\", \"min\", \"mean\". symmetric Logical. TRUE, expands undirected relation directed one duplicating -diagonal edges directions. Default FALSE.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_relations.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add spatial relations (core) — add_spatial_relations","text":"Updated data object x$data$spatial_relations[[name]].","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_relations.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Add spatial relations (core) — add_spatial_relations","text":"input can given external PU ids (pu1, pu2) internal PU indices (internal_pu1, internal_pu2). external ids provided, mapped using x$data$pu$id x$data$pu$internal_id. directed = FALSE, edges treated undirected duplicates collapsed using duplicate_agg. symmetric = TRUE, relation expanded directed edge list adding swapped copies -diagonal edges.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_relations.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add spatial relations (core) — add_spatial_relations","text":"","code":"if (FALSE) { # \\dontrun{ # Register an externally computed adjacency list: rel <- data.frame(pu1 = c(1, 1, 2), pu2 = c(2, 3, 3), weight = 1) x <- x |> add_spatial_relations(relations = rel, name = \"my_adj\") } # }"},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_rook.html","id":null,"dir":"Reference","previous_headings":"","what":"Add rook adjacency from sf polygons — add_spatial_rook","title":"Add rook adjacency from sf polygons — add_spatial_rook","text":"Build register rook adjacency relation (shared edge) planning-unit polygons. Rook adjacency detects pairs polygons share non-zero-length boundary segment.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_rook.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add rook adjacency from sf polygons — add_spatial_rook","text":"","code":"add_spatial_rook(x, pu_sf = NULL, name = \"default\", weight = 1)"},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_rook.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add rook adjacency from sf polygons — add_spatial_rook","text":"x data object created inputDataSpatial(). pu_sf Optional sf object PU polygons id column. NULL, uses x$data$pu_sf. name Character name/key store relation. weight Numeric edge weight assigned rook adjacency (default 1).","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_rook.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add rook adjacency from sf polygons — add_spatial_rook","text":"Updated data object.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/add_spatial_rook.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add rook adjacency from sf polygons — add_spatial_rook","text":"","code":"if (FALSE) { # \\dontrun{ x <- x |> add_spatial_rook(name = \"rook\", weight = 1) } # }"},{"path":"https://josesalgr.github.io/mosap/reference/as_mo_problem.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a multi-objective problem wrapper — as_mo_problem","title":"Create a multi-objective problem wrapper — as_mo_problem","text":"Create multi-objective problem wrapper","code":""},{"path":"https://josesalgr.github.io/mosap/reference/as_mo_problem.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a multi-objective problem wrapper — as_mo_problem","text":"","code":"as_mo_problem(x)"},{"path":"https://josesalgr.github.io/mosap/reference/as_mo_problem.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a multi-objective problem wrapper — as_mo_problem","text":"x Data object created prioriactions::inputData() (compatible object).","code":""},{"path":"https://josesalgr.github.io/mosap/reference/as_mo_problem.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a multi-objective problem wrapper — as_mo_problem","text":"object class MOProblem.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/data-class.html","id":null,"dir":"Reference","previous_headings":"","what":"Data class — data-class","title":"Data class — data-class","text":"Data class core container used prioriactions store information required define solve multi-action planning problem. holds planning-unit table, feature threat catalogues, action definitions distributions (feasibility, costs, effects), optional spatial inputs (sf geometry, coordinate tables, spatial relations), (optionally) built optimization model snapshot. Objects class typically created inputData() inputDataSpatial(). Downstream functions (e.g., add_actions(), add_effects(), target setters, objectives) enrich internal data list adding updating relevant tables.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/data-class.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Data class — data-class","text":"return value (class definition).","code":""},{"path":"https://josesalgr.github.io/mosap/reference/data-class.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Data class — data-class","text":"Data class designed support legacy single-objective workflows newer modular/multi-objective workflows. Many functions operate \"data-first\" way: store specifications (e.g., targets, objectives, constraints) x$data optimization model built later (typically calling solve()).","code":""},{"path":"https://josesalgr.github.io/mosap/reference/data-class.html","id":"storage","dir":"Reference","previous_headings":"","what":"Storage","title":"Data class — data-class","text":"class contains single field: data named list holding tables metadata used workflow. Common elements include pu, features, threats, actions, dist_features, dist_actions, dist_effects/dist_benefit, pu_sf, pu_coords, spatial_relations, targets, model-related entries model_ptr, model_list, model_args.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/data-class.html","id":"methods","dir":"Reference","previous_headings":"","what":"Methods","title":"Data class — data-class","text":"print() Print concise summary stored data , present, basic information built optimization model (dimensions, objective type, auxiliary variables fragmentation variables). Uses cli available, otherwise falls back plain-text summary. show() Alias print(). repr() Returns short string representation. getData(name) Retrieve element stored data name. getPlanningUnitsAmount() Return number planning units stored x$data$pu. getMonitoringCosts() Return planning-unit cost vector. Prefers column cost x$data$pu falls back legacy monitoring_cost present. getFeatureAmount() Return number features stored x$data$features. getFeatureNames() Return feature names x$data$features$name. getThreatsAmount() Return number threats stored x$data$threats. getThreatNames() Return threat names x$data$threats$name. getActionCosts() Return action costs. Prefers model-ready action table x$data$dist_actions$cost; otherwise falls back legacy x$data$dist_threats$action_cost. getActionsAmount() Return number actions. Prefers x$data$actions (new API); otherwise falls back number rows legacy x$data$dist_threats.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/dot-pa_build_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Build optimization model from Data — .pa_build_model","title":"Build optimization model from Data — .pa_build_model","text":"Materializes (builds) optimization model using current state Data object: prepared data tables, stored objective settings, stored constraints (e.g., targets).","code":""},{"path":"https://josesalgr.github.io/mosap/reference/dot-pa_build_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build optimization model from Data — .pa_build_model","text":"","code":".pa_build_model(x)"},{"path":"https://josesalgr.github.io/mosap/reference/dot-pa_build_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build optimization model from Data — .pa_build_model","text":"x Data object (class \"Data\") created inputData()/inputDataSpatial().","code":""},{"path":"https://josesalgr.github.io/mosap/reference/dot-pa_build_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build optimization model from Data — .pa_build_model","text":"Updated Data object model pointer model snapshot.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/get_actions.html","id":null,"dir":"Reference","previous_headings":"","what":"Get action results from a Solution — get_actions","title":"Get action results from a Solution — get_actions","text":"Extract action-allocation results table solution object returned solve(). returned table includes selected indicator (typically 0/1) showing whether feasible (pu, action) pair selected solution.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/get_actions.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get action results from a Solution — get_actions","text":"","code":"get_actions(x, only_selected = FALSE)"},{"path":"https://josesalgr.github.io/mosap/reference/get_actions.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get action results from a Solution — get_actions","text":"x solution object returned solve(). only_selected Logical. TRUE, return rows selected == 1. Default FALSE.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/get_actions.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get action results from a Solution — get_actions","text":"data.frame action-allocation information stored solution selected column.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/get_actions.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get action results from a Solution — get_actions","text":"function expects solution object store action-allocation table x$data$tables$actions. errors table missing. only_selected = TRUE, also errors selected column present.","code":""},{"path":[]},{"path":"https://josesalgr.github.io/mosap/reference/get_actions.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get action results from a Solution — get_actions","text":"","code":"if (FALSE) { # \\dontrun{ sol <- solve(problem) act_tbl <- get_actions(sol) act_sel <- get_actions(sol, only_selected = TRUE) } # }"},{"path":"https://josesalgr.github.io/mosap/reference/get_features.html","id":null,"dir":"Reference","previous_headings":"","what":"Get feature achievement summary from a Solution — get_features","title":"Get feature achievement summary from a Solution — get_features","text":"Extract feature achievement table solution object returned solve(). table typically summarizes, feature, much achieved baseline selection action effects, total.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/get_features.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get feature achievement summary from a Solution — get_features","text":"","code":"get_features(x)"},{"path":"https://josesalgr.github.io/mosap/reference/get_features.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get feature achievement summary from a Solution — get_features","text":"x solution object returned solve().","code":""},{"path":"https://josesalgr.github.io/mosap/reference/get_features.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get feature achievement summary from a Solution — get_features","text":"data.frame feature achievement metrics stored solution.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/get_features.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get feature achievement summary from a Solution — get_features","text":"function expects feature achievement table x$data$tables$features errors missing. exact columns depend model reporting options, commonly include: baseline_contrib: contribution baseline / conservation selection. recovery_contrib: contribution action effects (e.g., benefits). total: baseline + recovery.","code":""},{"path":[]},{"path":"https://josesalgr.github.io/mosap/reference/get_features.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get feature achievement summary from a Solution — get_features","text":"","code":"if (FALSE) { # \\dontrun{ sol <- solve(problem) feat_tbl <- get_features(sol) } # }"},{"path":"https://josesalgr.github.io/mosap/reference/get_pu.html","id":null,"dir":"Reference","previous_headings":"","what":"Get planning unit results from a Solution — get_pu","title":"Get planning unit results from a Solution — get_pu","text":"Extract planning-unit results table solution object returned solve(). returned table includes selected indicator (typically 0/1) showing whether planning unit selected solution.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/get_pu.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get planning unit results from a Solution — get_pu","text":"","code":"get_pu(x, only_selected = FALSE)"},{"path":"https://josesalgr.github.io/mosap/reference/get_pu.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get planning unit results from a Solution — get_pu","text":"x solution object returned solve(). only_selected Logical. TRUE, return rows selected == 1. Default FALSE.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/get_pu.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get planning unit results from a Solution — get_pu","text":"data.frame planning-unit information stored solution selected column.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/get_pu.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get planning unit results from a Solution — get_pu","text":"function expects solution object store planning-unit results table x$data$tables$pu. errors table missing. only_selected = TRUE, also errors selected column present.","code":""},{"path":[]},{"path":"https://josesalgr.github.io/mosap/reference/get_pu.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get planning unit results from a Solution — get_pu","text":"","code":"if (FALSE) { # \\dontrun{ sol <- solve(problem) pu_tbl <- get_pu(sol) pu_sel <- get_pu(sol, only_selected = TRUE) } # }"},{"path":"https://josesalgr.github.io/mosap/reference/get_solution_vector.html","id":null,"dir":"Reference","previous_headings":"","what":"Get raw solution vector from a Solution — get_solution_vector","title":"Get raw solution vector from a Solution — get_solution_vector","text":"Return raw decision-variable vector produced solver, internal model variable order used optimizer backend.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/get_solution_vector.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get raw solution vector from a Solution — get_solution_vector","text":"","code":"get_solution_vector(x)"},{"path":"https://josesalgr.github.io/mosap/reference/get_solution_vector.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get raw solution vector from a Solution — get_solution_vector","text":"x solution object returned solve().","code":""},{"path":"https://josesalgr.github.io/mosap/reference/get_solution_vector.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get raw solution vector from a Solution — get_solution_vector","text":"numeric vector one value per model variable.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/get_solution_vector.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get raw solution vector from a Solution — get_solution_vector","text":"function expects raw solution vector x$data$sol errors missing. vector returned numeric corresponds model's variable ordering (e.g., planning-unit selection variables, action variables, auxiliary variables fragmentation variables present).","code":""},{"path":[]},{"path":"https://josesalgr.github.io/mosap/reference/get_solution_vector.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get raw solution vector from a Solution — get_solution_vector","text":"","code":"if (FALSE) { # \\dontrun{ sol <- solve(problem) v <- get_solution_vector(sol) length(v) } # }"},{"path":"https://josesalgr.github.io/mosap/reference/get_targets.html","id":null,"dir":"Reference","previous_headings":"","what":"Get target achievement table from a Solution — get_targets","title":"Get target achievement table from a Solution — get_targets","text":"Extract target achievement table (present) solution object returned solve(). targets table typically contains target value, achieved value, gap (achieved - target_value), plus target metadata type units.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/get_targets.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get target achievement table from a Solution — get_targets","text":"","code":"get_targets(x)"},{"path":"https://josesalgr.github.io/mosap/reference/get_targets.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get target achievement table from a Solution — get_targets","text":"x solution object returned solve().","code":""},{"path":"https://josesalgr.github.io/mosap/reference/get_targets.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get target achievement table from a Solution — get_targets","text":"data.frame target achievement metrics, NULL solution contain targets table.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/get_targets.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get target achievement table from a Solution — get_targets","text":"Targets optional. solution include x$data$tables$targets, function returns NULL without error.","code":""},{"path":[]},{"path":"https://josesalgr.github.io/mosap/reference/get_targets.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get target achievement table from a Solution — get_targets","text":"","code":"if (FALSE) { # \\dontrun{ sol <- solve(problem) tgt_tbl <- get_targets(sol) if (!is.null(tgt_tbl)) head(tgt_tbl) } # }"},{"path":"https://josesalgr.github.io/mosap/reference/inputData.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a planning problem input object — inputData","title":"Create a planning problem input object — inputData","text":"Builds Data object either tabular inputs spatial inputs. entry point mosap workflow. function supports three input styles: Tabular mode: pu, features, dist_features data.frames, purely tabular workflow used (spatial packages required). Vector-PU spatial mode: dist_features missing (NULL) pu spatial vector (e.g. terra::SpatVector, sf, vector file path), features raster stack (one layer per feature), feature amounts aggregated polygon (default sum) stored dist_features. Raster-cell fast mode: dist_features missing (NULL) pu features rasters (e.g. terra::SpatRaster raster file paths), valid raster cell becomes planning unit. mode: cells valid cost finite cost > 0 pu used mask/template (cells NA pu excluded) avoids raster--polygon conversion substantially faster large grids.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/inputData.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a planning problem input object — inputData","text":"","code":"inputData(   pu,   features,   dist_features,   cost = NULL,   pu_id_col = \"id\",   locked_in_col = \"locked_in\",   locked_out_col = \"locked_out\",   pu_status = NULL,   cost_aggregation = c(\"mean\", \"sum\"),   ... )  # S4 method for class 'data.frame,data.frame,data.frame' inputData(   pu,   features,   dist_features,   cost = NULL,   pu_id_col = \"id\",   locked_in_col = \"locked_in\",   locked_out_col = \"locked_out\",   pu_status = NULL,   cost_aggregation = c(\"mean\", \"sum\"),   ... )  # S4 method for class 'ANY,ANY,missing' inputData(   pu,   features,   dist_features,   cost = NULL,   pu_id_col = \"id\",   locked_in_col = \"locked_in\",   locked_out_col = \"locked_out\",   pu_status = NULL,   cost_aggregation = c(\"mean\", \"sum\"),   ... )  # S4 method for class 'ANY,ANY,NULL' inputData(   pu,   features,   dist_features,   cost = NULL,   pu_id_col = \"id\",   locked_in_col = \"locked_in\",   locked_out_col = \"locked_out\",   pu_status = NULL,   cost_aggregation = c(\"mean\", \"sum\"),   ... )"},{"path":"https://josesalgr.github.io/mosap/reference/inputData.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a planning problem input object — inputData","text":"pu Planning units input. Either: data.frame id column (tabular mode), spatial vector (terra::SpatVector, sf, vector file path) (vector-PU mode), raster (terra::SpatRaster raster file path) used mask/template (raster-cell mode). features Features input. Either: data.frame id (optionally name) (tabular mode), raster stack one layer per feature (terra::SpatRaster file path) (vector-PU mode raster-cell mode). dist_features Distribution features. data.frame columns pu, feature, amount. missing NULL, spatial workflows derive automatically. cost spatial modes, required. Either column name PU vector attribute table (vector-PU mode) raster/file path (vector-PU raster-cell mode). raster-cell mode, cells cost <= 0 NA excluded (PU created). pu_id_col vector-PU mode, name id column PU layer. locked_in_col vector-PU mode, name logical column indicating locked-PUs. locked_out_col vector-PU mode, name logical column indicating locked-PUs. pu_status Optional (vector-PU raster-cell) status input. Either column name raster/file path. Values 2 mark locked-3 mark locked-(Marxan-style). cost_aggregation vector-PU mode, aggregate raster cell costs polygons cost raster. Either \"mean\" \"sum\". ... Additional arguments forwarded internal builders.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/inputData.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a planning problem input object — inputData","text":"Data object used downstream functions (add_*(), set_solver(), solve(), etc.).","code":""},{"path":"https://josesalgr.github.io/mosap/reference/inputData.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a planning problem input object — inputData","text":"Spatial relations created automatically. version inputData() take boundary argument. Spatial relations (boundary/rook/queen/kNN/distance) must registered explicitly inputData() using add_spatial_boundary(), add_spatial_rook(), add_spatial_queen(), add_spatial_knn(), add_spatial_distance(), add_spatial_relations(). raster-cell mode typically build relations coordinates add_spatial_knn() add_spatial_distance().","code":""},{"path":"https://josesalgr.github.io/mosap/reference/inputData.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a planning problem input object — inputData","text":"","code":"if (FALSE) { # \\dontrun{ # ------------------------------------------------------ # 1) Tabular mode # ------------------------------------------------------ pu <- data.frame(id = 1:3, cost = c(1, 2, 3)) features <- data.frame(id = 1:2, name = c(\"sp1\", \"sp2\")) dist_features <- data.frame(   pu = c(1, 1, 2, 3),   feature = c(1, 2, 2, 1),   amount = c(1, 5, 2, 1) )  x <- inputData(pu = pu, features = features, dist_features = dist_features)  # Optional: register a spatial relation later (if you need spatial objectives) rel <- data.frame(pu1 = 1, pu2 = 2, weight = 1) x <- add_spatial_relations(x, rel, name = \"rook_like\")   # ------------------------------------------------------ # 2) Raster-cell fast mode (1 PU per valid cell) # ------------------------------------------------------ library(terra) pu_mask <- rast(\"pu_mask.tif\")           # NA outside study area cost_r  <- rast(\"cost.tif\")              # cost per cell feat_r  <- rast(c(\"sp1.tif\", \"sp2.tif\")) # layers = features  x <- inputData(pu = pu_mask, features = feat_r, cost = cost_r)  # Optional: add spatial relations after inputData (e.g., kNN) x <- add_spatial_knn(x, k = 8, name = \"knn8\", weight_fn = \"inverse\")   # ------------------------------------------------------ # 3) Vector-PU spatial mode (polygons + raster features) # ------------------------------------------------------ pu_v   <- vect(\"pus.gpkg\")               # polygon PUs feat_r <- rast(c(\"sp1.tif\", \"sp2.tif\"))  # features as raster layers cost_r <- rast(\"cost.tif\")               # raster cost (aggregated to polygons)  x <- inputData(   pu = pu_v,   features = feat_r,   cost = cost_r,   pu_id_col = \"id\",   cost_aggregation = \"mean\" )  # Add boundary-length relation explicitly (requires sf) x <- add_spatial_boundary(x, pu_sf = x$data$pu_sf, name = \"boundary\") } # }"},{"path":"https://josesalgr.github.io/mosap/reference/inputDataSpatial.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a planning problem from spatial inputs — inputDataSpatial","title":"Create a planning problem from spatial inputs — inputDataSpatial","text":"Convert common spatial inputs (rasters vector layers Shapefiles GeoPackages) tabular inputs required inputData(). function builds base planning problem: planning units (pu), features, dist_features, optionally boundary. Actions action-benefits added later via add_actions() add_action_benefit(). Spatial backends optional (package import default). use function need: terra reading rasters/vectors extracting raster values. sf ask automatically derive boundary table.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/inputDataSpatial.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a planning problem from spatial inputs — inputDataSpatial","text":"","code":"inputDataSpatial(   pu,   features,   cost,   pu_id_col = \"id\",   locked_in_col = \"locked_in\",   locked_out_col = \"locked_out\",   pu_status = NULL,   cost_aggregation = c(\"mean\", \"sum\"),   boundary = \"auto\",   ... )"},{"path":"https://josesalgr.github.io/mosap/reference/inputDataSpatial.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a planning problem from spatial inputs — inputDataSpatial","text":"pu Planning units either: file path raster (e.g. GeoTIFF) cell values PU ids, terra::SpatRaster PU ids, file path vector layer (e.g. .shp, .gpkg), terra::SpatVector sf object column PU ids. features raster (file path) one layer per feature. Values interpreted amount per cell. Layer names used feature names. cost Either: column name pu (pu vector), raster (file path) providing cost per cell (pu raster pu lacks cost column). pu_id_col pu vector layer, name column containing planning unit ids. locked_in_col, locked_out_col Column names pu (vector) logical lock flags. missing, defaults FALSE. pu_status Optional. Either column name (pu vector) raster (file path) values 0,2,3 meaning available, locked-, locked-. converted locked_in/locked_out. column locks pu_status provided, column locks take precedence. cost_aggregation Aggregation used compute PU-level cost cost raster (default: mean). boundary Either NULL, data.frame columns id1, id2, boundary, string \"auto\" derive adjacency-based boundaries polygon planning units (boundary weight set 1 touching PU pairs). ... Passed inputData().","code":""},{"path":"https://josesalgr.github.io/mosap/reference/inputDataSpatial.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a planning problem from spatial inputs — inputDataSpatial","text":"object created inputData().","code":""},{"path":"https://josesalgr.github.io/mosap/reference/mo-problem-class.html","id":null,"dir":"Reference","previous_headings":"","what":"MOProblem class — mo-problem-class","title":"MOProblem class — mo-problem-class","text":"container multi-objective optimization workflows built top prioriactions Data object.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/mo-problem-class.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"MOProblem class — mo-problem-class","text":"goal MOProblem keep prioriactions focused defining data, constraints atomic objectives, prioriactionsMO orchestrates multi-objective methods (weighted sum, epsilon-constraint, AUGMECON, goal programming, interactive, etc.). Conceptually, MOProblem wraps: base Data object (coming prioriactions::inputData()), registry atomic objectives (alias, direction builders), multi-objective \"method\" configuration (e.g., weights, epsilons), Results (solutions, objective values, solver logs).","code":""},{"path":"https://josesalgr.github.io/mosap/reference/mo-problem-class.html","id":"fields","dir":"Reference","previous_headings":"","what":"Fields","title":"MOProblem class — mo-problem-class","text":"data Data object prioriactions. objectives named list registered objectives (alias). method list describing selected multi-objective method parameters. results list storing solutions, objective values diagnostics. meta list bookkeeping (package versions, creation time, etc.).","code":""},{"path":"https://josesalgr.github.io/mosap/reference/mo-problem-class.html","id":"methods","dir":"Reference","previous_headings":"","what":"Methods","title":"MOProblem class — mo-problem-class","text":"print(): Print compact summary. show(): Alias print(). repr(): Short representation. getData(): Return underlying Data object. listObjectives(): Return objective aliases currently registered. getObjective(alias): Return objective definition alias.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/mo-result-class.html","id":null,"dir":"Reference","previous_headings":"","what":"MOResult class — mo-result-class","title":"MOResult class — mo-result-class","text":"Container results produced multi-objective methods prioriactionsMO.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/mo-result-class.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"MOResult class — mo-result-class","text":"MOResult stores: run table (one row per run/solution), list underlying single-objective prioriactions::Solution objects, Metadata (method config, call, timestamps, etc.).","code":""},{"path":"https://josesalgr.github.io/mosap/reference/mo-result-class.html","id":"fields","dir":"Reference","previous_headings":"","what":"Fields","title":"MOResult class — mo-result-class","text":"runs data.frame one row per run (weights/epsilons, status, runtime, gap, objective values, etc.). solutions list prioriactions::Solution objects (one per run). meta list method configuration, call, additional bookkeeping.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/mosap.html","id":null,"dir":"Reference","previous_headings":"","what":"Create and solve multi-actions planning problems — mosap","title":"Create and solve multi-actions planning problems — mosap","text":"Create solve multi-actions planning problem single call. convenience wrapper around:","code":"inputData() -> (optional: add_spatial_* relations) -> solve()"},{"path":"https://josesalgr.github.io/mosap/reference/mosap.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create and solve multi-actions planning problems — mosap","text":"","code":"mosap(...)"},{"path":"https://josesalgr.github.io/mosap/reference/mosap.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create and solve multi-actions planning problems — mosap","text":"... Arguments inherited inputData() solve(). addition, wrapper supports boundary described .","code":""},{"path":"https://josesalgr.github.io/mosap/reference/mosap.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create and solve multi-actions planning problems — mosap","text":"object class solution.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/mosap.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create and solve multi-actions planning problems — mosap","text":"problem(): wrapper call problem(). optimization model expected built solved solve() information stored Data object (objectives, targets, relations, etc.). Spatial relations / boundary: function pass boundary inputData(). provide boundary, interpreted request register spatial relation inputData() solve(). Supported boundary values: data.frame boundary table (e.g., columns id1,id2,boundary pu1,pu2,weight), registered via add_spatial_boundary(). \"auto\" derive boundary-length relations x$data$pu_sf (requires sf inputData() stored pu_sf).","code":""},{"path":"https://josesalgr.github.io/mosap/reference/mosap.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create and solve multi-actions planning problems — mosap","text":"","code":"# \\donttest{ set.seed(14)  data(sim_pu_data, sim_features_data, sim_dist_features_data,      sim_threats_data, sim_dist_threats_data, sim_sensitivity_data,      sim_boundary_data)  ## One-shot solve (tabular), registering a boundary relation from a table s <- mosap(   pu = sim_pu_data,   features = sim_features_data,   dist_features = sim_dist_features_data,   threats = sim_threats_data,   dist_threats = sim_dist_threats_data,   sensitivity = sim_sensitivity_data,   boundary = sim_boundary_data,   model_type = \"minimizeCosts\",   time_limit = 50,   output_file = FALSE,   cores = 2 ) #> Error in mosap(pu = sim_pu_data, features = sim_features_data, dist_features = sim_dist_features_data,     threats = sim_threats_data, dist_threats = sim_dist_threats_data,     sensitivity = sim_sensitivity_data, boundary = sim_boundary_data,     model_type = \"minimizeCosts\", time_limit = 50, output_file = FALSE,     cores = 2): The following params are not defined in this function: pu features dist_features threats dist_threats sensitivity boundary time_limit output_file cores print(s) #> Error: object 's' not found  ## Spatial example (conceptual): boundary derived from PU polygons stored by inputData() ## s2 <- mosap( ##   pu = pu_sf, features = feat_r, cost = cost_r, ##   boundary = \"auto\", ##   model_type = \"minimizeFragmentation\", ##   time_limit = 60 ## ) # }"},{"path":"https://josesalgr.github.io/mosap/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator — %>%","title":"Pipe operator — %>%","text":"See magrittr::[\\%>\\%][magrittr::pipe] details.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator — %>%","text":"","code":"lhs %>% rhs"},{"path":"https://josesalgr.github.io/mosap/reference/pipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pipe operator — %>%","text":"lhs value magrittr placeholder. rhs function call using magrittr semantics.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/pipe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pipe operator — %>%","text":"result calling rhs(lhs).","code":""},{"path":"https://josesalgr.github.io/mosap/reference/plot.Solution.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot a Solution (if spatial geometry is available) — plot.Solution","title":"Plot a Solution (if spatial geometry is available) — plot.Solution","text":"Plot solution using planning unit (PU) geometries available. method supports two views controlled : \"pu\": highlights selected planning units. \"actions\": highlights selected actions within planning units. Optionally, selected PUs selected action can labelled “conservation”. = \"actions\", function aggregates selected actions per PU single label concatenating unique action names using \"+\" (e.g., \"harvest+sustainable\"). many actions can co-occur PU, number distinct labels can grow quickly; cases, consider filtering single action via action = \"...\", ensure one action per PU.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/plot.Solution.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot a Solution (if spatial geometry is available) — plot.Solution","text":"","code":"# S3 method for class 'Solution' plot(   x,   what = c(\"pu\", \"actions\"),   only_selected = FALSE,   action = NULL,   ...,   include_conservation = TRUE,   conservation_label = \"conservation\",   base_alpha = 0.1,   selected_alpha = 0.9,   base_fill = \"grey60\",   base_color = NA,   selected_color = NA,   fill_values = NULL,   fill_na = \"grey60\",   use_viridis = TRUE )"},{"path":"https://josesalgr.github.io/mosap/reference/plot.Solution.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot a Solution (if spatial geometry is available) — plot.Solution","text":"x Solution object. must contain PU geometry sf object x$Data$data$pu_sf (preferred) x$data$pu_sf. Character string indicating plot. One \"pu\" \"actions\". only_selected Logical. used = \"pu\". TRUE, throw error selected PUs exist. FALSE, map still drawn base layer. action Optional character scalar. used = \"actions\". provided, filter plot single action label. ... Additional arguments (reserved future extensions). include_conservation Logical. used = \"actions\". TRUE, selected PUs selected action added map label conservation_label. conservation_label Character scalar. Label used selected PUs selected action include_conservation = TRUE. base_alpha Numeric \\([0,1]\\). Alpha used base PU layer. selected_alpha Numeric \\([0,1]\\). Alpha used highlighted (selected) geometries. base_fill Fill color base PU layer. base_color Border color base PU layer. Use NA border. selected_color Border color highlighted geometries. Use NA border. fill_values Optional named character vector colors. Names must match labels shown legend (.e., values action field used plot, including conservation_label enabled). provided, overrides viridis. fill_na Color used missing values manual scale (relevant fill_values provided). use_viridis Logical. TRUE fill_values NULL, use discrete viridis palette viridis installed.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/plot.Solution.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot a Solution (if spatial geometry is available) — plot.Solution","text":"Invisibly returns ggplot object. plot printed side effect.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/plot.Solution.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Plot a Solution (if spatial geometry is available) — plot.Solution","text":"plotting method requires PU geometry stored sf object either x$Data$data$pu_sf x$data$pu_sf. geometry must contain id column matching planning unit identifiers. Colors = \"actions\" controlled either: fill_values: named vector mapping action labels colors; discrete viridis palette fill_values NULL, use_viridis = TRUE, viridis package installed.","code":""},{"path":[]},{"path":"https://josesalgr.github.io/mosap/reference/plot.Solution.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot a Solution (if spatial geometry is available) — plot.Solution","text":"","code":"if (FALSE) { # \\dontrun{ # Plot selected planning units plot(sol, what = \"pu\")  # Plot selected actions plot(sol, what = \"actions\")  # Plot a single action only plot(sol, what = \"actions\", action = \"harvest\")  # Manual colors for actions (and conservation) cols <- c(harvest = \"#E41A1C\", sustainable = \"#4DAF4A\", conservation = \"#377EB8\") plot(sol, what = \"actions\", fill_values = cols, conservation_label = \"conservation\") } # }"},{"path":"https://josesalgr.github.io/mosap/reference/print.html","id":null,"dir":"Reference","previous_headings":"","what":"Print — print","title":"Print — print","text":"Displays information object.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/print.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print — print","text":"","code":"# S3 method for class 'Data' print(x, ...)  # S3 method for class 'Solution' print(x, ...)  # S3 method for class 'MOProblem' print(x, ...)"},{"path":"https://josesalgr.github.io/mosap/reference/print.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print — print","text":"x object. ... used.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/print.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Print — print","text":"None.","code":""},{"path":[]},{"path":"https://josesalgr.github.io/mosap/reference/problem.html","id":null,"dir":"Reference","previous_headings":"","what":"Configure mathematical model (legacy-compatible preset) — problem","title":"Configure mathematical model (legacy-compatible preset) — problem","text":"Legacy-compatible helper stores model preset inside Data object. new pipeline, MILP built inside solve(). function create C++ model pointer; configures x$data$model_args .pa_build_model().","code":""},{"path":"https://josesalgr.github.io/mosap/reference/problem.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Configure mathematical model (legacy-compatible preset) — problem","text":"","code":"problem(   x,   model_type = c(\"minimizeCosts\", \"maximizeBenefits\"),   budget = 0,   blm = 0,   curve = 1,   segments = 3 )"},{"path":"https://josesalgr.github.io/mosap/reference/problem.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Configure mathematical model (legacy-compatible preset) — problem","text":"x Data object (class \"Data\") created inputData()/inputDataSpatial(). model_type character. \"minimizeCosts\" \"maximizeBenefits\". budget numeric. Stored model_args (compat/printing). blm numeric. Stored model_args (compat/printing). curve integer. Stored model_args (compat/printing). segments integer. Stored model_args (compat/printing).","code":""},{"path":"https://josesalgr.github.io/mosap/reference/problem.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Configure mathematical model (legacy-compatible preset) — problem","text":"Updated Data object preset stored x$data$model_args.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/register_objective.html","id":null,"dir":"Reference","previous_headings":"","what":"Register an atomic objective in an MOProblem — register_objective","title":"Register an atomic objective in an MOProblem — register_objective","text":"solve anything. records evaluate/build objective. Multi-objective methods (weighted, epsilon, etc.) use registry later.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/register_objective.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Register an atomic objective in an MOProblem — register_objective","text":"","code":"register_objective(   alias,   sense = c(\"min\", \"max\"),   build_fun,   eval_fun = NULL,   ... )"},{"path":"https://josesalgr.github.io/mosap/reference/register_objective.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Register an atomic objective in an MOProblem — register_objective","text":"alias character(1) unique objective identifier used MO methods. sense character(1) either \"min\" \"max\". build_fun function (data, ...) -> data_or_problem activates objective. now can store decide later whether returns new model pointer, objective vector, configured OptimizationProblem. eval_fun Optional function (solution, data, ...) -> numeric(1) evaluate objective value. ... Reserved future extensions. x MOProblem.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/register_objective.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Register an atomic objective in an MOProblem — register_objective","text":"function takes MOProblem (DSL x + ...) returns updated object.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/set_method_weighted.html","id":null,"dir":"Reference","previous_headings":"","what":"Set multi-objective method: weighted sum — set_method_weighted","title":"Set multi-objective method: weighted sum — set_method_weighted","text":"Configure weighted-sum multi-objective method top atomic objectives previously registered planning object. weighted-sum method combines multiple objectives single scalar objective: $$\\sum_{k \\K} w_k \\, f_k(x)$$ \\(f_k(x)\\) atomic objective (e.g., minimum cost, minimum fragmentation, maximum benefit) \\(w_k \\ge 0\\) user-supplied weights. function solve problem. stores multi-objective configuration inside \"MOProblem\" object can later used multi-objective solving workflow (e.g., weighted runs, epsilon-constraint, AUGMECON, interactive methods).","code":""},{"path":"https://josesalgr.github.io/mosap/reference/set_method_weighted.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Set multi-objective method: weighted sum — set_method_weighted","text":"","code":"set_method_weighted(x, aliases, weights, normalize = FALSE)"},{"path":"https://josesalgr.github.io/mosap/reference/set_method_weighted.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Set multi-objective method: weighted sum — set_method_weighted","text":"x planning object (Data) existing \"MOProblem\". Data object provided, promoted \"MOProblem\" via .pamo_as_mo(). aliases character. Objective aliases combine (e.g. c(\"cost\",\"frag\")). alias must refer registered atomic objective. weights numeric. Non-negative weights, length aliases. normalize = TRUE, weights rescaled sum 1. normalize logical. TRUE, normalize weights sum 1.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/set_method_weighted.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Set multi-objective method: weighted sum — set_method_weighted","text":"object x, promoted class \"MOProblem\", method configuration stored x$method:","code":"x$method <- list(   name = \"weighted\",   params = list(     aliases = <character>,     weights = <numeric>,     normalize = <logical>   ) )"},{"path":"https://josesalgr.github.io/mosap/reference/set_method_weighted.html","id":"atomic-objectives-requirement","dir":"Reference","previous_headings":"","what":"Atomic objectives requirement","title":"Set multi-objective method: weighted sum — set_method_weighted","text":"Weighted-sum requires base planning object contains one atomic objectives registered unique aliases. Atomic objectives registered calling objective setters alias argument, example: Internally, atomic objectives stored (convention) x$data$objectives[[alias]], entry including: objective_id: stable identifier (e.g., \"min_cost\", \"min_fragmentation\") model_type: builder identifier (used later materializing model) sense: \"min\" \"max\" objective_args: objective-specific arguments","code":"x <- x |>   add_objective_min_cost(alias = \"cost\") |>   add_objective_min_fragmentation(alias = \"frag\")"},{"path":"https://josesalgr.github.io/mosap/reference/set_method_weighted.html","id":"objective-sense-min-vs-max-","dir":"Reference","previous_headings":"","what":"Objective sense (min vs max)","title":"Set multi-objective method: weighted sum — set_method_weighted","text":"Combining objectives different senses (mixing \"min\" \"max\") requires standardization step multi-objective solving layer (e.g., converting maximization terms minimization terms negation shifting/scaling). function validates requested aliases exist; additional checks (e.g., forbidding mixed senses) can implemented .pamo_get_objective_specs() enforced later solver.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/set_method_weighted.html","id":"weight-scaling-and-normalization","dir":"Reference","previous_headings":"","what":"Weight scaling and normalization","title":"Set multi-objective method: weighted sum — set_method_weighted","text":"Weights must finite non-negative. normalize = TRUE, weights rescaled sum 1. Multiplying weights positive constant change optimizer’s solution pure weighted-sum formulation, can affect numerical conditioning.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/set_method_weighted.html","id":"limitations-of-weighted-sums","dir":"Reference","previous_headings":"","what":"Limitations of weighted sums","title":"Set multi-objective method: weighted sum — set_method_weighted","text":"Weighted sums typically recover supported Pareto-optimal solutions (convex hull Pareto front). Pareto front non-convex (common integer programs), efficient solutions obtained weight vector; consider epsilon-constraint AUGMECON methods cases.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/set_method_weighted.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Set multi-objective method: weighted sum — set_method_weighted","text":"","code":"# \\donttest{ # ------------------------------------------------------------ # Example 1: Cost vs Fragmentation (both minimization) # ------------------------------------------------------------ pu <- data.frame(id = 1:4, cost = c(1, 2, 2, 3)) features <- data.frame(id = 1, name = \"sp1\") dist_features <- data.frame(pu = c(1,2,3,4), feature = 1, amount = c(1,1,1,1))  x <- inputData(pu = pu, features = features, dist_features = dist_features)  # (Optional) register a boundary relation used by fragmentation objectives bnd <- data.frame(   id1 = c(1,2,3,1,2,3,4),   id2 = c(1,2,3,2,3,4,4),   boundary = c(2,2,2,1,1,1,2) ) x <- add_spatial_boundary(x, boundary = bnd, name = \"boundary\")  # targets + atomic objectives x <- x |>   add_conservation_targets_relative(0.5) |>   add_objective_min_cost(alias = \"cost\") |>   add_objective_min_fragmentation(     alias = \"frag\",     relation_name = \"boundary\",     weight_multiplier = 0.01   )  # configure weighted sum mo <- set_method_weighted(   x,   aliases = c(\"cost\", \"frag\"),   weights = c(1, 1),   normalize = TRUE )  # Later (in your MO workflow): # sol <- solve(mo)   # ------------------------------------------------------------ # Example 2: Scan weights to explore trade-offs # ------------------------------------------------------------ weight_grid <- seq(0, 1, by = 0.25) mos <- vector(\"list\", length(weight_grid))  for (i in seq_along(weight_grid)) {   w <- weight_grid[i]   mos[[i]] <- set_method_weighted(     x,     aliases = c(\"cost\", \"frag\"),     weights = c(1 - w, w),     normalize = TRUE   )   # sols[[i]] <- solve(mos[[i]]) }   # ------------------------------------------------------------ # Example 3: Mixing max and min objectives (requires solver support) # ------------------------------------------------------------ # If your multi-objective solver standardizes senses, you can mix: # - a minimization objective (e.g., cost) # - a maximization objective (e.g., benefit) # # Otherwise, use epsilon-constraint or re-encode the objective. # # x2 <- x |> #   add_actions(actions_df) |> #   add_benefits(benefits_df) |> #   add_objective_min_cost(alias = \"cost\") |> #   add_objective_max_benefit(alias = \"benefit\") # mo2 <- set_method_weighted(x2, aliases = c(\"cost\",\"benefit\"), weights = c(1, 0.2)) # }"},{"path":"https://josesalgr.github.io/mosap/reference/set_solver.html","id":null,"dir":"Reference","previous_headings":"","what":"Configure solver settings — set_solver","title":"Configure solver settings — set_solver","text":"Stores solver configuration inside Data object, solve(x) can run without repeating solver arguments. function build model; stores runtime solver options.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/set_solver.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Configure solver settings — set_solver","text":"","code":"set_solver(   x,   solver = c(\"auto\", \"gurobi\", \"cplex\", \"cbc\", \"symphony\"),   gap_limit = NULL,   time_limit = NULL,   solution_limit = NULL,   cores = NULL,   verbose = NULL,   name_output_file = NULL,   output_file = NULL,   solver_params = list(),   ... )"},{"path":"https://josesalgr.github.io/mosap/reference/set_solver.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Configure solver settings — set_solver","text":"x Data object created inputData() inputDataSpatial(). solver Character. One \"auto\", \"gurobi\", \"cplex\", \"cbc\", \"symphony\". gap_limit Numeric 0,1. Relative MIP optimality gap. NULL, keep stored value. time_limit Numeric. Time limit seconds. NULL, keep stored value. solution_limit Logical. NULL, keep stored value. cores Integer. NULL, keep stored value. verbose Logical. NULL, keep stored value. name_output_file Character. NULL, keep stored value. output_file Logical. NULL, keep stored value. solver_params List. Solver-specific parameters (merged stored ones). ... Convenience: solver-specific parameters (e.g., MIPFocus=1) merged solver_params.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/set_solver.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Configure solver settings — set_solver","text":"Updated Data object.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/show.html","id":null,"dir":"Reference","previous_headings":"","what":"Show — show","title":"Show — show","text":"Display information object.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/show.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Show — show","text":"","code":"# S4 method for class 'Data' show(x)  # S4 method for class 'MOProblem' show(x)"},{"path":"https://josesalgr.github.io/mosap/reference/show.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Show — show","text":"x object.","code":""},{"path":[]},{"path":"https://josesalgr.github.io/mosap/reference/simData.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulated multi-action planning data — simData","title":"Simulated multi-action planning data — simData","text":"Simulated data making prioritizations. sim_pu_data Planning units represented tabular data. sim_features_data Features represented tabular data. sim_dist_features_data simulated distribution four features. sim_threats_data Threats represented tabular data. sim_dist_threats_data simulated threats two threats. sim_sensitivity_data Sensitivity features threats tabular data. sim_boundary_data Boundary data one hundred planning units.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/simData.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulated multi-action planning data — simData","text":"","code":"data(sim_pu_data)  data(sim_features_data)  data(sim_dist_features_data)  data(sim_threats_data)  data(sim_dist_threats_data)  data(sim_sensitivity_data)  data(sim_boundary_data)"},{"path":"https://josesalgr.github.io/mosap/reference/simData.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Simulated multi-action planning data — simData","text":"sim_pu_data data.frame object. sim_features_data data.frame object. sim_dist_features_data data.frame object. sim_threats_data data.frame object. sim_dist_threats_data data.frame object. sim_sensitivity_data data.frame object. sim_boundary_data data.frame object.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/simData.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Simulated multi-action planning data — simData","text":"","code":"if (FALSE) { # \\dontrun{ # load data data(sim_pu_data, sim_features_data, sim_dist_features_data, sim_threats_data, sim_dist_threats_data, sim_sensitivity_data, sim_boundary_data)  # plot examples library(raster) r <- raster::raster(ncol=10, nrow=10, xmn=0, xmx=10, ymn=0, ymx=10)  # plot cost of pu's values(r) <- sim_pu_data$monitoring_cost plot(r)  # plot feature distribution of feature 1 features <- tidyr::spread(data = sim_dist_features_data, key = feature, value = amount, fill = 0) values(r) <- features$'1' plot(r) } # }"},{"path":"https://josesalgr.github.io/mosap/reference/solution-class.html","id":null,"dir":"Reference","previous_headings":"","what":"Solution class — solution-class","title":"Solution class — solution-class","text":"class used represent solution MIP (Mixed-Integer Programming) model. includes several methods obtain information optimization process solution associated planning units actions. created using solve() function.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/solution-class.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Solution class — solution-class","text":"return value.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/solution-class.html","id":"fields","dir":"Reference","previous_headings":"","what":"Fields","title":"Solution class — solution-class","text":"$data list. Object containing data results optimization process.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/solution-class.html","id":"methods","dir":"Reference","previous_headings":"","what":"Methods","title":"Solution class — solution-class","text":"print() Print basic information model solution. show() Call print method.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/solution-class.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Solution class — solution-class","text":"","code":"# \\donttest{ # set seed for reproducibility set.seed(14)  ## Load data data(sim_pu_data, sim_features_data, sim_dist_features_data, sim_threats_data, sim_dist_threats_data, sim_sensitivity_data, sim_boundary_data)  ## Create data instance problem_data <- inputData(   pu = sim_pu_data, features = sim_features_data, dist_features = sim_dist_features_data,   threats = sim_threats_data, dist_threats = sim_dist_threats_data,   sensitivity = sim_sensitivity_data, boundary = sim_boundary_data ) #> Error in .pa_inputData_tabular_impl(pu = pu, features = features, dist_features = dist_features,     boundary = NULL, ...): formal argument \"boundary\" matched by multiple actual arguments  ## Create optimization model problem_model <- problem(x = problem_data, blm = 1) #> Error in problem(x = problem_data, blm = 1): could not find function \"problem\"  ## Solve the optimization model s <- solve(a = problem_model, time_limit = 5, output_file = FALSE, cores = 2) #> Error: object 'problem_model' not found  ## Use class methods  s$print() #> Error: object 's' not found # }"},{"path":"https://josesalgr.github.io/mosap/reference/solve.html","id":null,"dir":"Reference","previous_headings":"","what":"Solve optimization model — solve","title":"Solve optimization model — solve","text":"Solves model defined Data object. Solver configuration read x$data$solve_args (typically set via set_solver() / set_solver_*()).","code":""},{"path":"https://josesalgr.github.io/mosap/reference/solve.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Solve optimization model — solve","text":"","code":"solve(x, ...)"},{"path":"https://josesalgr.github.io/mosap/reference/solve.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Solve optimization model — solve","text":"x Data object created inputData() inputDataSpatial(). ... Optional legacy solver arguments (deprecated).","code":""},{"path":"https://josesalgr.github.io/mosap/reference/solve.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Solve optimization model — solve","text":"Solution object.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/targets.html","id":null,"dir":"Reference","previous_headings":"","what":"Targets API — targets","title":"Targets API — targets","text":"Functions define feature-level targets planning problem. Targets stored x$data$targets later translated mathematical constraints optimization model built. API supports three target types: Conservation Ensure baseline representation selected planning units reaches threshold. Recovery Ensure action-driven improvements (deltas) reach threshold. Mixed total Ensure baseline + action deltas together reach single threshold. target stored row least: feature, type, sense, target_unit, target_raw, basis_total, target_value, optional metadata label created_at.","code":""},{"path":"https://josesalgr.github.io/mosap/reference/targets.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Targets API — targets","text":"Targets format. targets argument can provided multiple equivalent ways (implemented .pa_parse_targets()), typically including: single numeric value recycled features, numeric vector aligned feature order, named numeric vector names identify features, data.frame feature identifiers target values. Features may identified numeric id /feature name column supported .pa_parse_targets(). Absolute vs relative targets. Absolute targets set target_value directly provided targets. Relative targets treat targets proportions \\([0,1]\\) convert absolute thresholds multiplying feature-specific basis: Conservation relative targets use baseline totals (via .pa_feature_totals()). Recovery relative targets use either potential improvement (via .pa_feature_potential()) baseline totals, depending relative_basis. Mixed-total relative targets use baseline totals (via .pa_feature_totals()). chosen basis stored basis_total, resulting absolute threshold stored target_value. Mutual exclusivity mixed-total targets. Mixed-total targets represent single threshold baseline + deltas feature: $$\\sum_i z_{} r_{} + \\sum_{,} x_{ia}\\Delta_{ias} \\ge T^{mix}_s.$$ differs enforcing separate conservation recovery targets, mixed-total targets intended mutually exclusive conservation/recovery targets feature. (Enforcement handled .pa_store_targets()). Overwrite behavior. overwrite=TRUE, existing targets type feature(s) can replaced. overwrite=FALSE, adding targets features already targets type typically error (exact behavior handled .pa_store_targets()).","code":""}]
