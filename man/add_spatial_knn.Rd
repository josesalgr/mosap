% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/add_spatial_relations.R
\name{add_spatial_knn}
\alias{add_spatial_knn}
\title{Add kNN spatial relations from coordinates}
\usage{
add_spatial_knn(
  x,
  coords = NULL,
  k = 8,
  name = "default",
  weight_fn = c("constant", "inverse", "inverse_sq"),
  eps = 1e-09
)
}
\arguments{
\item{x}{A \linkS4class{data} object created with \code{\link[=inputData]{inputData()}} or \code{\link[=inputDataSpatial]{inputDataSpatial()}}.}

\item{coords}{Optional coordinates: \code{data.frame(id,x,y)} or a matrix with 2 columns (x,y).
If \code{NULL}, tries \code{x$data$pu$x} and \code{x$data$pu$y}.}

\item{k}{Integer. Number of neighbours per PU.}

\item{name}{Name/key under which the relation will be stored.}

\item{weight_fn}{How to convert distance to edge weight: \code{"constant"}, \code{"inverse"}, or \code{"inverse_sq"}.}

\item{eps}{Small constant to avoid division by zero (default 1e-9).}
}
\value{
Updated \linkS4class{data} object.
}
\description{
Build a k-nearest-neighbours graph between planning units using coordinates.
Does not require \code{sf}. For speed on large instances, it uses \code{RANN} if available.
}
