% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/add_targets.R
\name{targets}
\alias{targets}
\title{Targets API}
\description{
Functions to define feature-level targets for a planning problem. Targets are stored in
\code{x$data$targets} and later translated into mathematical constraints when the optimization
model is built.

The API supports three target types:
\describe{
\item{\strong{Conservation}}{Ensure baseline representation of selected planning units reaches a threshold.}
\item{\strong{Recovery}}{Ensure action-driven improvements (deltas) reach a threshold.}
\item{\strong{Mixed total}}{Ensure baseline + action deltas together reach a single threshold.}
}

Each target is stored as a row with at least:
\code{feature}, \code{type}, \code{sense}, \code{target_unit}, \code{target_raw}, \code{basis_total},
\code{target_value}, and optional metadata such as \code{label} and \code{created_at}.
}
\details{
\strong{Targets format.}
The \code{targets} argument can be provided in multiple equivalent ways (as implemented by
\code{.pa_parse_targets()}), typically including:
\itemize{
\item a single numeric value recycled to all features,
\item a numeric vector aligned to the feature order,
\item a named numeric vector where names identify features,
\item a \code{data.frame} with feature identifiers and target values.
}
Features may be identified by numeric \code{id} and/or by a feature name column if supported by
\code{.pa_parse_targets()}.

\strong{Absolute vs relative targets.}
Absolute targets set \code{target_value} directly from the provided \code{targets}.
Relative targets treat \code{targets} as proportions in \eqn{[0,1]} and convert them to absolute
thresholds by multiplying by a feature-specific basis:
\itemize{
\item Conservation relative targets use baseline totals (via \code{.pa_feature_totals()}).
\item Recovery relative targets use either potential improvement (via \code{.pa_feature_potential()})
or baseline totals, depending on \code{relative_basis}.
\item Mixed-total relative targets use baseline totals (via \code{.pa_feature_totals()}).
}
The chosen basis is stored in \code{basis_total}, and the resulting absolute threshold is stored in
\code{target_value}.

\strong{Mutual exclusivity for mixed-total targets.}
Mixed-total targets represent a single threshold on \emph{baseline + deltas} for a feature:
\deqn{\sum_i z_{is} r_{is} + \sum_{i,a} x_{ia}\Delta_{ias} \ge T^{mix}_s.}
Because this differs from enforcing separate conservation and recovery targets, mixed-total targets
are intended to be mutually exclusive with conservation/recovery targets for the same feature.
(Enforcement is handled by \code{.pa_store_targets()}).

\strong{Overwrite behavior.}
When \code{overwrite=TRUE}, existing targets of the same type for the same feature(s) can be replaced.
When \code{overwrite=FALSE}, adding targets for features that already have targets of that type will
typically error (exact behavior is handled by \code{.pa_store_targets()}).
}
\keyword{internal}
